<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Jãƒªãƒ¼ã‚°ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–åˆ†æ</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <style>
    /* CSSã¯å¤‰æ›´ã‚ã‚Šã¾ã›ã‚“ã®ã§ã€ãã®ã¾ã¾ã§ã™ */
    body {
      font-family: 'Segoe UI', 'Noto Sans JP', Arial, sans-serif;
      margin: 0;
      background: linear-gradient(135deg, #232947 0%, #24304e 100%);
      color: #f0f0f0;
    }
    nav { display: flex; justify-content: center; background-color: #25304a; padding: 12px 0 8px 0; gap: 16px;}
    nav button {
      font-size: 1.05rem; padding: 7px 22px; border-radius: 24px; border: none;
      background: linear-gradient(90deg, #274266 0%, #41cdf4 100%);
      color: #fff; margin: 0 6px; cursor: pointer; transition: background 0.2s, transform 0.12s;
      font-weight: bold; letter-spacing: 0.07em;
    }
    nav button.active, nav button:focus {
      background: linear-gradient(90deg, #41cdf4 0%, #274266 100%);
      color: #232947;
      transform: scale(1.06);
    }
    .page-section { display: none; }
    .page-section.visible { display: block !important; }
    main { max-width: 1200px; margin: 0 auto; padding: 0 14px 40px 14px; }
    .page-title-row { display: flex; align-items: center; justify-content: center; margin-top: 38px; margin-bottom: 30px; gap: 14px;}
    .page-title-row h1 { font-size: 2.2rem; font-weight: bold; letter-spacing: 0.1em; margin: 0; color: #eaf7fc; display: flex; align-items: center; gap: 8px;}
    .ball-icon { width: 37px; height: 37px; vertical-align: middle; margin-left: 8px; margin-bottom: 1px;}
    .score-calc-btn { background: linear-gradient(90deg, #f1f1f3 70%, #c0e8fb 100%); border: none; color: #222; font-size: 0.98rem; border-radius: 17px; padding: 5px 16px; margin-left: 16px; font-weight: bold; box-shadow: 0 1px 8px 0 #0001; cursor: pointer; position: relative;}
    .score-calc-pop { display: none; position: absolute; top: 36px; left: 50%; transform: translateX(-50%); background: #232947; color: #fff; border-radius: 12px; box-shadow: 0 2px 10px #1113; padding: 13px 22px 9px 22px; z-index: 10; min-width: 240px; font-size: 1.01rem; text-align: left; line-height: 1.6; white-space: pre-line; border: 1.3px solid #299ad3;}
    .score-calc-btn:hover .score-calc-pop, .score-calc-btn:focus .score-calc-pop { display: block; }
    .score-calc-pop .calc-note { font-size: 0.85em; color: #aaf; margin-top: 7px; }
    .big5-container { display: flex; flex-direction: column; align-items: center; gap: 18px; margin-bottom: 34px; }
    .big5-row { display: flex; gap: 36px; justify-content: center; margin-bottom: 8px; }
    .club-card { border: none; border-radius: 18px; padding: 14px 17px 11px 17px; width: 220px; min-height: 88px; text-align: center; color: #fff; font-size: 1.08rem; box-sizing: border-box; transition: box-shadow 0.2s; box-shadow: 0 2px 13px 0 #23304638; display: flex; flex-direction: column; align-items: center; justify-content: center;}
    .club-card.top-club   { background: linear-gradient(125deg, #e94444 60%, #fd7575 100%); }
    .club-card.potential-big { background: linear-gradient(120deg, #22bbf0 70%, #8ae7fb 100%); }
    .club-card.middle     { background: linear-gradient(125deg, #aaa 60%, #e1e1e1 100%); color: #202028; }
    .club-card.local      { background: linear-gradient(120deg, #232947 60%, #2b3752 100%); }
    .club-card h3.club-title { font-size: 1.16rem; font-weight: bold; margin: 0 0 8px 0; line-height: 1.17; transition: font-size 0.2s; word-break: break-word;}
    .club-card.long-title h3.club-title { font-size: 0.96rem; }
    .club-card .score-val { font-size: 1.07rem; font-weight: 500; margin: 3px 0 0 0; letter-spacing: 0.07em;}
    .club-table-container { margin-top: 32px; }
    table { width: 98%; border-collapse: separate; border-spacing: 0; margin: 0 auto 36px auto; background-color: #293352ee; border-radius: 13px; overflow: hidden; box-shadow: 0 2px 11px 0 #23304634;}
    th, td { border: none; padding: 11px 7px; text-align: center; font-weight: bold;}
    th { background: linear-gradient(90deg, #299ad3 65%, #b0e7fa 100%); color: #fff; font-size: 1.04rem; font-weight: bold; letter-spacing: 0.05em;}
    tr { background: linear-gradient(90deg, #26334e 90%, #233046 100%); font-size: 0.875rem; transition: background 0.13s;}
    tr.potential-big { background: linear-gradient(90deg, #1fb8e4 60%, #b8f4ff 100%); color: #1c1c3b; }
    tr.middle        { background: linear-gradient(90deg, #bdbdbd 60%, #e1e1e1 100%); color: #21213b; }
    tr.local         { background: linear-gradient(90deg, #232947 60%, #2b3752 100%); color: #eee; }
    tr.top-club      { background: linear-gradient(90deg, #e94444 60%, #fd7575 100%); color: #fff; }
    tr:hover { background: #2a4b76cc !important; }
    .table-note { display: inline-block; float: right; font-size: 13px; color: #bbc; margin-bottom: 7px; margin-right: 6px; background: transparent;}
    .metric-btn-row { display: flex; justify-content: center; gap: 15px; margin-bottom: 15px; margin-top: 18px;}
    .metric-btn { background: linear-gradient(90deg, #1fb8e4 70%, #b8f4ff 100%); border: none; color: #202947; font-size: 1.03rem; border-radius: 16px; padding: 6px 22px; font-weight: bold; cursor: pointer; margin: 0 2px; transition: background 0.16s, color 0.1s, transform 0.1s;}
    .metric-btn.active, .metric-btn:focus { background: linear-gradient(90deg, #299ad3 80%, #1fb8e4 100%); color: #fff; transform: scale(1.06);}
    .metrics-chart-wrap { width: 100%; max-width: 1100px; margin: 0 auto 40px auto; background: #fff; border-radius: 18px; padding: 18px 9px 15px 9px; box-shadow: 0 2px 9px #23304622;}
    #metricChart { height: 800px !important; max-width: 1060px;}
    canvas { width: 100% !important; max-width: 1060px; height: 520px !important; background: #fff; margin-bottom: 10px;}
    .blog-list { margin-top: 28px; text-align: left; max-width: 700px; margin-left: auto; margin-right: auto;}
    .blog-list li { margin-bottom: 17px; font-size: 1.09rem; border-left: 4px solid #28c9ed; background: #24334d77; padding: 9px 16px 9px 19px; border-radius: 7px; transition: background 0.18s;}
    .blog-list li:hover { background: #b9e7f826; }
    .blog-list a { color: #21c0ee; font-weight: bold; text-decoration: none; transition: color 0.17s;}
    .blog-list a:hover { color: #f86565; text-decoration: underline; }
    .country-btn {
      background: rgba(255,240,70,0.07);
      border: 2px solid rgba(255,240,70,0.15);
      cursor: pointer;
      border-radius: 18px;
      outline: none;
      z-index: 5;
      transition: background 0.17s, box-shadow 0.17s, border-color 0.17s;
    }
    .country-btn:hover, .country-btn.active {
      background: rgba(255,240,70,0.36);
      border: 2.5px solid #ffe552cc;
      box-shadow: 0 0 14px 6px #ffe55288;
      outline: 2px solid #ffe552bb;
    }
    .nav-dropdown {
      position: relative;
      display: inline-block;
    }
    .nav-dropdown-content {
      display: none;
      position: absolute;
      left: 0;
      top: 46px;
      background: #fff;
      min-width: 165px;
      max-width: 220px;
      border-radius: 11px;
      box-shadow: 0 4px 14px 0 #2223;
      z-index: 100;
      padding: 0;
      border: 1.3px solid #29b6e6;
    }
    .nav-dropdown-content button {
      width: 100%;
      background: none;
      border: none;
      color: #21304c;
      padding: 11px 0 11px 0;
      text-align: center;
      font-size: 1.11rem;
      font-weight: bold;
      border-radius: 8px;
      margin: 3px 0;
      cursor: pointer;
      box-shadow: none;
      transition: background 0.14s, color 0.12s;
    }
    .nav-dropdown-content button:hover,
    .nav-dropdown-content button:focus {
      background: #e8faff;
      color: #12b7ea;
    }
    .nav-dropdown:hover .nav-dropdown-content,
    .nav-dropdown:focus-within .nav-dropdown-content {
      display: block;
    }
    .best11-player-label {
      position: absolute;
      min-width: 62px;
      max-width: 68px;
      width: 68px;
      height: 24px;
      padding: 3.5px 8px 2.5px 8px;
      background: rgba(36,48,78,0.87);
      color: #ffd700;
      font-size: 0.90rem;
      font-weight: bold;
      text-align: center;
      border-radius: 13px;
      border: 1.2px solid #ffd70066;
      z-index: 5;
      box-shadow: 0 1px 7px #1128;
      user-select: none;
      transition: background 0.14s;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      line-height: 1.15;
    }
    .best11-player-label span {
      display: block;
      width: 100%;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      font-size: 1em;
      transition: font-size 0.15s;
    }
    .best11-player-label.unselected {
      background:rgba(90,100,120,0.43);
      color:#fff7;
      border:1.2px dashed #fff3;
    }
    .position-btn.active {
      background: linear-gradient(90deg, #27aee7 60%, #aaf7fd 100%);
      color: #143060;
      border: 2px solid #299ad3;
      box-shadow: 0 2px 6px #27aee74c;
      transform: scale(1.08);
    }
    .best11-player-label.selected {
      background: linear-gradient(90deg, #27aee7 60%, #aaf7fd 100%);
      color: #143060;
      border: 2px solid #299ad3;
      box-shadow: 0 2px 9px #27aee777, 0 1px 7px #1128;
      z-index: 10;
    }
    #best11-table table {
      width: 100%;
      max-width: 700px;
      min-width: 220px;
      margin: 0 auto 18px auto;
      background: #f9fcff;
      color: #21304c;
      border-radius: 16px;
      box-shadow: 0 2px 18px #2330461a;
      border-collapse: separate;
      border-spacing: 0;
      overflow: hidden;
      font-size: 0.96rem;
    }
    #best11-table th, #best11-table td {
      padding: 5px 7px !important;
      line-height: 1.1;
      text-align: center;
      border-bottom: 1.5px solid #e8edf6;
    }
    #best11-table th {
      background: linear-gradient(90deg, #27aee7 65%, #b0e7fa 100%);
      color: #fff;
      font-size: 1.13rem;
      font-weight: bold;
      letter-spacing: 0.06em;
    }
    #best11-table tr:last-child td {
      border-bottom: none;
    }
    #best11-table tr:nth-child(even) td { background: #f2f6fa; }
    #best11-table tr:nth-child(odd) td { background: #ffffff; }
    #best11-table td.unselected { color: #c5c5c5; font-style: italic; }
    #court-area {
      position:absolute; top:0; left:0; width:360px; height:350px; z-index:2;
      min-width: 360px; max-width: 360px;
      min-height: 350px; max-height: 350px;
      margin-bottom: 0;
    }
    #best11-capture-area {
    position: relative; /* â† ã“ã‚Œã‚’è¿½åŠ ã€ã¾ãŸã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚’å¤–ã™ */
    width: 1050px; 
    min-width: 900px; 
    max-width: 1050px;
    padding: 26px 22px 22px 22px; 
    border-radius:28px;
    box-shadow:0 4px 26px #2237,0 2px 8px #2236; 
    border:2.2px solid #29b6e6;
    display:flex; 
    flex-direction:column; 
    align-items:center;
    margin: 40px auto;
    background: linear-gradient(135deg, #232947 0%, #24304e 100%);
}
    #best11-capture-core {
  display: flex;
  gap: 25px; /* éš™é–“ã‚’å°‘ã—ç‹­ã‚ã‚‹ */
  align-items: flex-start;
  justify-content: center;
  width: 980px; /* â†æ¨ªå¹…ã‚’åºƒã’ã‚‹ */
  max-width: 100vw;
  margin: 0 auto 18px auto;
}
    #table-footer {
      text-align: right; font-size: 20px; color: #888; margin-top: 4px;
      user-select: none; font-weight: bold; letter-spacing: 0.08em;
    }
    .league-tab-btn {
      font-size: 1.04rem; padding: 6px 23px; margin: 0 6px 6px 0; border-radius: 20px;
      border: none; background: linear-gradient(90deg, #41cdf4 0%, #274266 100%);
      color: #fff; font-weight: bold; letter-spacing: 0.08em; cursor: pointer;
      transition: background 0.18s, color 0.1s;
    }
    .league-tab-btn.active, .league-tab-btn:focus {
      background: linear-gradient(90deg, #274266 0%, #41cdf4 100%);
      color: #21304c; transform: scale(1.07);
    }
    #club-status-board {
      position: fixed; left: 50%; top: 50%;
      transform: translate(-50%, -53%); z-index: 9999;
      max-width: 97vw; width: 480px;
      background: linear-gradient(115deg, #1e283f 80%, #299ad3 100%);
      color: #fff; border-radius: 17px; box-shadow: none;
      padding: 32px 28px 20px 28px; font-size: 1.11rem; display: none;
    }
    .blog-card {
      width: 30%; background: #fff; border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1); overflow: hidden;
      text-align: left; cursor: pointer; transition: transform 0.2s;
    }
    .blog-card:hover { transform: translateY(-6px); }
    .blog-card img { width: 100%; height: 160px; object-fit: cover; }
    .blog-card-content { padding: 12px; }
    .blog-card-title { font-weight: bold; margin-bottom: 5px; color: #333; font-size: 1.05em; }
    .blog-card-date { color: #888; font-size: 0.9em; }
    .position-btn-row {
      display: flex; flex-wrap: wrap; gap: 3px 7px;
      justify-content: center; margin-bottom: 14px;
    }
    #player-choice-list {
      width: auto !important; min-width: 0 !important; max-width: 100% !important;
      display: flex; justify-content: center;
    }
    .player-choice-row { width: auto !important; }
    #position-tabs { margin-top: 13px; margin-bottom: 0; text-align: center; }

    @media (max-width: 900px) {
      #europe-flex-row { flex-direction: column !important; gap: 24px !important; align-items: center !important; }
      #map-container { margin: 0 auto !important; }
      #player-table-wrap { max-width: 98vw !important; min-width: unset !important; }
    }
    @media (max-width: 700px) {
      main { padding: 0 2vw 30vw 2vw;}
      .big5-row { flex-direction: column; gap: 17px;}
      .club-card { width: 90vw; max-width: 310px; min-width: 0;}
      table { width: 100%; }
      .metrics-chart-wrap { max-width: 99vw; }
      #club-status-board {
        width: 97vw !important; min-width: unset !important; max-width: 99vw !important;
        left: 50vw; top: 50vh; transform: translate(-50%, -50%);
        padding: 18px 3vw 10px 3vw;
      }
    }
/* =============================================== */
/* === ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³å‘ã‘ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œCSS === */
/* =============================================== */
@media (max-width: 768px) {

    /* --- å…¨ä½“ãƒ»ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ --- */
    body {
        /* ã‚¹ãƒãƒ›ã§ã¯æ–‡å­—ã‚’å°‘ã—å°ã•ã */
        font-size: 14px;
    }
    main {
        /* å·¦å³ã®ä½™ç™½ã‚’èª¿æ•´ */
        padding: 0 4vw 80px 4vw;
    }
    nav {
        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã‚’æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ã« */
        flex-wrap: nowrap;
        justify-content: flex-start;
        overflow-x: auto;
        padding: 12px 10px 8px 10px;
        -webkit-overflow-scrolling: touch; /* iOSã§ã®ã‚¹ãƒ ãƒ¼ã‚ºãªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
    }
    nav button {
        /* ãƒœã‚¿ãƒ³ãŒç¸®ã¾ãªã„ã‚ˆã†ã« */
        flex-shrink: 0;
        padding: 6px 18px;
        font-size: 0.95rem;
    }
    .page-title-row h1 {
        /* ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ã‚’å°‘ã—å°ã•ã */
        font-size: 1.8rem;
    }
    
    /* --- ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–æŒ‡æ•°ãƒšãƒ¼ã‚¸ --- */
    .big5-row {
        /* æ¨ªä¸¦ã³ã‹ã‚‰ç¸¦ä¸¦ã³ã«å¤‰æ›´ */
        flex-direction: column;
        gap: 12px;
        width: 100%;
    }
    .club-card {
        width: 90%;
        margin: 0 auto;
    }

    /* --- ã‚¯ãƒ©ãƒ–æŒ‡æ¨™ãƒšãƒ¼ã‚¸ --- */
    .metrics-chart-wrap {
        /* ãƒãƒ£ãƒ¼ãƒˆã®é«˜ã•ã‚’èª¿æ•´ */
        height: 600px;
    }
    
    /* --- 5å¤§ãƒªãƒ¼ã‚°æ—¥æœ¬äººé¸æ‰‹ãƒšãƒ¼ã‚¸ --- */
    #europe-flex-row {
        /* æ¨ªä¸¦ã³ã‹ã‚‰ç¸¦ä¸¦ã³ã«å¤‰æ›´ */
        flex-direction: column;
        align-items: center;
        gap: 20px;
    }
    #map-container {
        /* åœ°å›³ã®ã‚µã‚¤ã‚ºã‚’ç”»é¢å¹…ã«åˆã‚ã›ã‚‹ */
        width: 90vw;
        max-width: 380px;
        height: auto;
    }
    #map-container img {
        width: 100%;
        height: auto;
    }
    #player-table-wrap {
        width: 100%;
        overflow-x: auto; /* ãƒ†ãƒ¼ãƒ–ãƒ«ãŒã¯ã¿å‡ºãŸã‚‰æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
    }

    /* --- ãƒ™ã‚¹ãƒˆ11ãƒšãƒ¼ã‚¸ --- */
    #best11-capture-area {
        /* å…¨ä½“ã®å¹…ã‚’ç”»é¢ã«åˆã‚ã›ã‚‹ */
        width: 96vw;
        min-width: 0;
        padding: 15px 2vw;
        margin-top: 20px;
    }
    #best11-capture-core {
        /* æ¨ªä¸¦ã³ã‹ã‚‰ç¸¦ä¸¦ã³ã«å¤‰æ›´ */
        flex-direction: column;
        align-items: center;
        width: 100%;
        gap: 20px;
    }
    .best11-player-label {
        /* ã‚¹ãƒãƒ›ç”¨ã«ãƒ©ãƒ™ãƒ«ã‚µã‚¤ã‚ºã‚’å°‘ã—èª¿æ•´ */
        width: 60px;
        height: 22px;
        font-size: 0.85rem;
    }
    #best11-table {
        width: 100%;
        overflow-x: auto; /* ãƒ†ãƒ¼ãƒ–ãƒ«ãŒã¯ã¿å‡ºãŸã‚‰æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
    }
    #copy-best11-img-btn {
        /* ãƒœã‚¿ãƒ³ã®ä½ç½®ã¨ã‚µã‚¤ã‚ºã‚’èª¿æ•´ */
        padding: 8px 15px;
        font-size: 0.9rem;
        top: 10px;
        right: 10px;
    }

    /* --- è¨˜äº‹ãƒšãƒ¼ã‚¸ --- */
    .blog-card {
        /* 2åˆ—è¡¨ç¤ºã«ã™ã‚‹ */
        width: 48%;
    }
}

@media (max-width: 480px) {
    /* ã•ã‚‰ã«å°ã•ã„ç”»é¢ç”¨ã®èª¿æ•´ */
    .page-title-row h1 {
        font-size: 1.5rem;
        flex-direction: column; /* ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜ãƒœã‚¿ãƒ³ã‚’ç¸¦ä¸¦ã³ */
        gap: 10px;
    }
    .blog-card {
        /* 1åˆ—è¡¨ç¤ºã«ã™ã‚‹ */
        width: 95%;
    }
}
  </style>
</head>
<body>
<main>
  <nav>
    <button onclick="showPage('top', this)" class="active">ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–æŒ‡æ•°</button>
    <button onclick="showPage('metrics', this)">ã‚¯ãƒ©ãƒ–æŒ‡æ¨™</button>
    <button onclick="showPage('history', this)">éå»10å¹´é †ä½</button>
    <button onclick="showPage('introduce', this)">å„ã‚¯ãƒ©ãƒ–ç´¹ä»‹</button>
    <span class="nav-dropdown">
      <button onclick="showPage('europe', this)" id="nav-europe-btn">5å¤§ãƒªãƒ¼ã‚°æ—¥æœ¬äººé¸æ‰‹</button>
      <span class="nav-dropdown-content">
        <button onclick="event.stopPropagation();showPage('best11',this);">ãƒ™ã‚¹ãƒˆ11ã‚’ä½œã‚‹</button>
      </span>
    </span>
    <button onclick="showPage('blog', this)">è¨˜äº‹</button>
  </nav>

  <div id="page-title-top" class="page-title-row" style="display:flex;">
    <h1>
      Jãƒªãƒ¼ã‚° ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–æŒ‡æ•°ğŸ“Š
      <span class="score-calc-btn" tabindex="0">ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–æŒ‡æ•°ã¨ã¯
        <span class="score-calc-pop">
          Jãƒªãƒ¼ã‚°å„ã‚¯ãƒ©ãƒ–ãŒã©ã‚Œã ã‘ã€Œãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ã€ã«è¿‘ã¥ã„ã¦ã„ã‚‹ã®ã‹ã‚’ã€å®Ÿç¸¾ã‚„äººæ°—ãªã©4ã¤ã®æŒ‡æ¨™ã‚’åŸºã«ã‚¹ã‚³ã‚¢åŒ–ã—ãŸã‚‚ã®ã§ã™ã€‚
          ãƒ»<b>50ä»¥ä¸Š</b>ï¼š<span style="color:#ffd700;font-weight:bold;">ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–</span>
          ãƒ»<b>30ï½49.9</b>ï¼š<span style="color:#e94444;font-weight:bold;">æœ‰æœ›ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–</span>
          ãƒ»<b>20ï½29.9</b>ï¼š<span style="color:#22bbf0;font-weight:bold;">æ½œåœ¨çš„ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–</span>
          ãƒ»<b>5ï½19.9</b>ï¼š<span style="color:#999;font-weight:bold;">ä¸­å …ã‚¯ãƒ©ãƒ–</span>
          ãƒ»<b>4.9ä»¥ä¸‹</b>ï¼š<span style="color:#aaa;font-weight:bold;">ãƒ­ãƒ¼ã‚«ãƒ«ã‚¯ãƒ©ãƒ–</span>
          <div class="calc-note">
            â€»2024å¹´ã¾ã§ã®ãƒ‡ãƒ¼ã‚¿ã§è¨ˆç®—
            â€»è©³ã—ãã¯ã‚¹ã‚³ã‚¢è¨ˆç®—æ–¹æ³•ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
          </div>
        </span>
      </span>
    </h1>
  </div>
  <div id="page-title-metrics" class="page-title-row" style="display:none;"><h1>ã‚¯ãƒ©ãƒ–æŒ‡æ¨™</h1></div>
  <div id="page-title-history" class="page-title-row" style="display:none;"><h1>Jãƒªãƒ¼ã‚°éå»ãƒ‡ãƒ¼ã‚¿</h1></div>
  <div id="page-title-introduce" class="page-title-row" style="display:none;"><h1>å„ã‚¯ãƒ©ãƒ–ç´¹ä»‹</h1></div>
  <div id="page-title-europe" class="page-title-row" style="display:none;"><h1>25-26ã‚·ãƒ¼ã‚ºãƒ³ 5å¤§ãƒªãƒ¼ã‚°æ—¥æœ¬äººé¸æ‰‹</h1></div>
  <div id="page-title-best11" class="page-title-row" style="display:none;"><h1>ãƒ™ã‚¹ãƒˆ11ã‚’ä½œã‚‹</h1></div>
  <div id="page-title-blog" class="page-title-row" style="display:none;"><h1>è¨˜äº‹ãƒ»ãƒ–ãƒ­ã‚°</h1></div>
  
  <div id="top" class="page-section visible">
    <div class="big5-container" id="big5-cards"></div>
    <div class="club-table-container">
      <h2 style="text-align:center; margin-bottom:8px; color:#baf7fa; font-size:1.25rem;">6ä½ä»¥ä¸‹ã‚¯ãƒ©ãƒ–</h2>
      <div id="club-categories"></div>
    </div>
  </div>
  <div id="metrics" class="page-section">
    <span class="table-note">â€»ä¸¦ã³ã¯ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ã‚¹ã‚³ã‚¢é †<br>â€»æŸãƒ»æ¹˜å—ã®å£²ä¸Šã¯2023å¹´</span>
    <div class="metric-btn-row">
      <button class="metric-btn active" onclick="showMetricChart('revenue')">å£²ä¸Šé«˜ï¼ˆ2024ï¼‰</button>
      <button class="metric-btn" onclick="showMetricChart('audience')">è¦³å®¢å‹•å“¡æ•°ï¼ˆ2024ï¼‰</button>
      <button class="metric-btn" onclick="showMetricChart('titles')">ã‚¿ã‚¤ãƒˆãƒ«æ•°ï¼ˆ2024ã¾ã§ï¼‰</button>
    </div>
    <div class="metrics-chart-wrap">
      <canvas id="metricChart" width="1000" height="520"></canvas>
    </div>
  </div>
  <div id="history" class="page-section">
    <span class="table-note">â€»ä¸¦ã³ã¯ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ã‚¹ã‚³ã‚¢é †<br>â€»åœ¨ç±ã—ã¦ã„ãªã„å¹´ã¯21ä½ã§è¨ˆç®—</span>
    <div id="jleague-history"></div>
  </div>
  <div id="introduce" class="page-section">
    <div id="club-status-board" style="display:none;"></div>
    <div id="club-league-tabs" style="text-align:center; margin-bottom:20px;">
      <button class="league-tab-btn active" data-league="J1">J1</button>
      <button class="league-tab-btn" data-league="J2">J2</button>
      <button class="league-tab-btn" data-league="J3">J3</button>
      <button class="league-tab-btn" data-league="JFL">JFL</button>
    </div>
    <div id="club-league-table"></div>
  </div>
  <div id="europe" class="page-section" style="display:none;">
    <h2 style="text-align:center;"></h2>
    <div id="europe-flex-row" style="display:flex; flex-direction:row; gap:36px; align-items:flex-start; justify-content:flex-start;">
      <div id="map-container" style="position:relative; width:430px; height:410px; flex-shrink:0;">
        <img src="img/europe.png" alt="ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘åœ°å›³" width="430" height="410" style="border-radius:13px; display:block;">
        <button class="country-btn" data-country="ã‚¤ãƒ³ã‚°ãƒ©ãƒ³ãƒ‰" style="position:absolute; left:30px; top:200px; width:60px; height:70px;"></button>
        <button class="country-btn" data-country="ã‚¹ãƒšã‚¤ãƒ³"   style="position:absolute; left:10px; top:335px; width:70px; height:60px;"></button>
        <button class="country-btn" data-country="ãƒ•ãƒ©ãƒ³ã‚¹"   style="position:absolute; left:70px; top:280px; width:65px; height:60px;"></button>
        <button class="country-btn" data-country="ã‚¤ã‚¿ãƒªã‚¢"   style="position:absolute; left:160px; top:320px; width:50px; height:80px;"></button>
        <button class="country-btn" data-country="ãƒ‰ã‚¤ãƒ„"     style="position:absolute; left:130px; top:240px; width:60px; height:60px;"></button>
      </div>
      <div id="player-table-wrap" style="min-width:280px; max-width:1000px; width:100%; padding-top:9px;"></div>
    </div>
  </div>
  <div id="best11" class="page-section" style="display:none;">
    <div id="best11-capture-area">
      <div style="font-size:2.1em; font-weight:bold; color:#fff; margin-bottom:8px;">#ã‚ãªãŸã®ãƒ™ã‚¹ãƒˆã‚¤ãƒ¬ãƒ–ãƒ³</div>
      <div id="formation-title" style="font-size:1.13em; color:#eaf7fc; margin-bottom:14px;">ãƒ•ã‚©ãƒ¼ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼š3-4-3</div>
      <div id="best11-capture-core">
        <div style="min-width:370px; max-width:380px; position:relative;">
          <img src="img/court.png" style="width:360px;height:350px;border-radius:16px;box-shadow:0 2px 10px #0017;display:block;position:absolute;left:0;top:0;z-index:1;">
          <div id="court-area"></div>
        </div>
        <div style="flex:1; position: relative; max-width: 510px; margin: 0 auto;">
          <div id="best11-table"></div>
          <div id="table-footer">Jleague-big-club.com</div>
        </div>
      </div>
      <button id="copy-best11-img-btn" style="position:absolute; right:24px; top:18px; background:#2ab8f2; color:#fff; border:none; border-radius:12px; padding:10px 23px; font-size:1.08em; font-weight:bold; z-index:100; box-shadow:0 2px 12px #0003; cursor:pointer;">ç”»åƒã‚’ã‚³ãƒ”ãƒ¼</button>
      <span id="copy-best11-img-msg" style="position:absolute; right:26px; top:65px; color:#fff970; font-size:1em;"></span>
    </div>
    <div id="best11-controls">
      <div id="formation-buttons" style="text-align:center;margin:19px auto 8px auto;">
        <button class="formation-btn active" onclick="setFormation('343', this)">3-4-3</button>
        <button class="formation-btn" onclick="setFormation('433', this)">4-3-3</button>
      </div>
      <div id="position-tabs" style="max-width:950px; margin:0 auto 26px auto;"></div>
    </div>
  </div>
  <div id="blog" class="page-section" style="display:none;">
    <div id="blog-content" style="display: none; text-align: left; max-width: 800px; margin: 20px auto; padding: 25px; background: #fff; color: #333; border-radius: 12px; box-shadow: 0 2px 10px #0002;"></div>
    <div id="blog-list-container" style="display:flex; flex-wrap:wrap; gap:20px; justify-content:center;"></div>
    <div id="pagination" style="text-align:center; margin-top:20px;"></div>
  </div>
</main>

<button id="score-method-btn" style="position: fixed; bottom: 27px; right: 24px; z-index: 9999; background: #fff; color: #232947; font-weight: bold; border: none; border-radius: 28px; box-shadow: 0 2px 14px #2222; padding: 11px 21px; font-size: 1.10rem; cursor: pointer;">
  ã‚¹ã‚³ã‚¢è¨ˆç®—æ–¹æ³•
</button>
<div id="score-method-pop" style="display:none; position: fixed; bottom: 77px; right: 33px; min-width: 330px; max-width: 95vw; background: #fff; color: #222; border-radius: 17px; box-shadow: 0 2px 19px #2226; padding: 22px 22px 18px 24px; z-index: 10001; font-size: 1.04rem; line-height: 1.7; border: 1.4px solid #29b6e6;">
  <div style="font-size: 1.18em; font-weight: bold; margin-bottom: 11px;">ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–æŒ‡æ•°ã®è¨ˆç®—æ–¹æ³•</div>
  <ul style="margin:0 0 0 1em; padding: 0 0 0 0.6em;">
    <li><b>å£²ä¸Šã‚¹ã‚³ã‚¢ï¼š</b> = å£²ä¸Šé«˜ï¼ˆå„„å††ï¼‰ Ã· 200 Ã— 100</li>
    <li><b>è¦³å®¢ã‚¹ã‚³ã‚¢ï¼š</b> = å¹³å‡è¦³å®¢å‹•å“¡æ•° Ã· 45,000 Ã— 100</li>
    <li><b>ã‚¿ã‚¤ãƒˆãƒ«ã‚¹ã‚³ã‚¢ï¼š</b> = ã‚¿ã‚¤ãƒˆãƒ«æ•°ï¼ˆã‚¹ãƒ¼ãƒ‘ãƒ¼æ¯é™¤ãï¼‰ Ã· 98 Ã— 100</li>
    <li><b>J1åœ¨ç±10å¹´å¹³å‡é †ä½ã‚¹ã‚³ã‚¢ï¼š</b> = 21 âˆ’ J1åœ¨ç±10å¹´å¹³å‡é †ä½</li>
    <li style="margin-top:7px;"><b>ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ã‚¹ã‚³ã‚¢ï¼š</b><br> = å£²ä¸Šã‚¹ã‚³ã‚¢ Ã— 0.3 ï¼‹ è¦³å®¢ã‚¹ã‚³ã‚¢ Ã— 0.15 ï¼‹ ã‚¿ã‚¤ãƒˆãƒ«ã‚¹ã‚³ã‚¢ Ã— 0.25 ï¼‹ å¹³å‡é †ä½ã‚¹ã‚³ã‚¢ Ã— 0.3</li>
  </ul>
  <div style="text-align:right; margin-top:14px;">
    <a href="#" id="score-detail-link" style="color:#299ad3; text-decoration:underline; font-weight:bold; font-size:0.98em; cursor:pointer;">æ•°å€¤ã®è¨­å®šãªã©è©³ç´°</a>
  </div>
</div>
<div id="score-detail-pop" style="display:none; position: fixed; bottom: 77px; right: 33px; min-width: 330px; max-width: 95vw; background: #fff; color: #222; border-radius: 17px; box-shadow: 0 2px 19px #2226; padding: 22px 22px 18px 24px; z-index: 10001; font-size: 1.04rem; line-height: 1.7; border: 1.4px solid #29b6e6; max-height: 72vh; overflow-y: auto;">
  <div style="font-size: 1.06em; margin-top: 19px; line-height: 1.85;">
    <b>ãªãœã“ã®æŒ‡æ¨™ã‚’ä½¿ã†ã®ã‹ï¼Ÿ</b><br>
    <ul style="margin-top: 8px;">
      <li>æœ¬ã‚µã‚¤ãƒˆã®ã€Œãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–æŒ‡æ•°ã€ã¯ã€<b>æ—¥æœ¬ã‚µãƒƒã‚«ãƒ¼ç•Œã§â€œãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–â€ã¨ã•ã‚Œã‚‹æ¡ä»¶</b>ã‚’ã§ãã‚‹ã ã‘æ•°å€¤ã§å¯è¦–åŒ–ã™ã‚‹ãŸã‚ã«ä½œæˆã—ã¾ã—ãŸã€‚</li>
      <li>ã€Œãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ã€ã¨å‘¼ã°ã‚Œã‚‹ã‚¯ãƒ©ãƒ–ã¯ã€<b>çµŒå–¶è¦æ¨¡ï¼ˆå£²ä¸Šï¼‰</b>ãƒ»<b>è¦³å®¢å‹•å“¡</b>ãƒ»<b>ã‚¿ã‚¤ãƒˆãƒ«ç²å¾—æ•°</b>ãƒ»<b>J1ã§ã®å®Ÿç¸¾</b>ã¨ã„ã†4ã¤ã®å´é¢ã§æ˜ã‚‰ã‹ãªå¼·ã¿ã‚’æŒã£ã¦ã„ã¾ã™ã€‚</li>
      <li>ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘ä¸»è¦ãƒªãƒ¼ã‚°ã®ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ï¼ˆä¾‹ï¼šãƒãƒ³ãƒã‚§ã‚¹ã‚¿ãƒ¼Uã€ãƒ¬ã‚¢ãƒ«ãƒ»ãƒãƒ‰ãƒªãƒ¼ãƒ‰ãªã©ï¼‰ã‚‚ã€çµŒå–¶è¦æ¨¡ã‚„è¦³å®¢æ•°ã€ã‚¿ã‚¤ãƒˆãƒ«ç²å¾—ã€å®‰å®šã—ãŸä¸Šä½æˆç¸¾ã¨ã„ã£ãŸæŒ‡æ¨™ãŒæ³¨ç›®ã•ã‚Œã¦ã„ã¾ã™ã€‚</li>
      <li>Jãƒªãƒ¼ã‚°ã§ã‚‚åŒã˜è¦–ç‚¹ã§æ¯”è¼ƒã§ãã‚‹ã‚ˆã†ã€<b>4ã¤ã®æŒ‡æ¨™</b>ã‚’çµ„ã¿åˆã‚ã›ã¦ã‚¹ã‚³ã‚¢åŒ–ã—ã¦ã„ã¾ã™ã€‚</li>
    </ul>
    <b>ãªãœã“ã®æ¯”ç‡ï¼ˆé‡ã¿ï¼‰ãªã®ã‹ï¼Ÿ</b><br>
    <ul style="margin-top: 8px;">
      <li>å£²ä¸Šé«˜ã‚„è¦³å®¢å‹•å“¡ã¯â€œäººæ°—â€ã‚„â€œå½±éŸ¿åŠ›â€ã®æŒ‡æ¨™ã€ã‚¿ã‚¤ãƒˆãƒ«ã‚„é †ä½ã¯â€œå®Ÿç¸¾â€ã‚„â€œå¼·ã•â€ã®æŒ‡æ¨™ã§ã™ã€‚</li>
      <li>ã‚¯ãƒ©ãƒ–ã®ç·åˆåŠ›ãƒ»â€œãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ã‚‰ã—ã•â€ãŒæœ€ã‚‚åæ˜ ã•ã‚Œã‚‹ã‚ˆã†ã€<b>å£²ä¸Š/é †ä½=30%ãšã¤ã€ã‚¿ã‚¤ãƒˆãƒ«=25%ã€è¦³å®¢å‹•å“¡=15%</b>ã®æ¯”ç‡ã§èª¿æ•´ã—ã¦ã„ã¾ã™ã€‚â€»è¦³å®¢å‹•å“¡ã¯ç„¡æ–™è¦³å®¢ã‚‚å«ã‚€ã®ã§æ¯”é‡ã¯ä½ãè¨­å®š</li>
    </ul>
    <b>ã€ä¾‹ã€‘æµ¦å’Œãƒ¬ãƒƒã‚ºã®ã‚¹ã‚³ã‚¢</b><br>
    <ul style="margin-top: 8px;">
      <li>2024å¹´æ™‚ç‚¹ã§ã€æµ¦å’Œãƒ¬ãƒƒã‚ºã¯ã€Œéå»10å¹´ã®J1å¹³å‡é †ä½ã€ã¯7.2ä½ã§ã™ãŒã€ã€Œå£²ä¸Šé«˜ã€ã€Œè¦³å®¢å‹•å“¡æ•°ã€ã€Œã‚¿ã‚¤ãƒˆãƒ«æ•°ã€ã¯Jãƒªãƒ¼ã‚°ãƒˆãƒƒãƒ—ã‚¯ãƒ©ã‚¹ã§ã™ã€‚</li>
      <li>ãã®ãŸã‚ã€æŒ‡æ¨™ã®åˆè¨ˆã‚¹ã‚³ã‚¢ãŒã‚‚ã£ã¨ã‚‚é«˜ãã€ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–æŒ‡æ•°1ä½ã¨ãªã‚Šã¾ã™ã€‚</li>
      <li>ã“ã®ã‚ˆã†ã«ã€<b>çµŒå–¶è¦æ¨¡ãƒ»äººæ°—ãƒ»å¼·ã•ã®å…¨ã¦ã§éš›ç«‹ã¤ã‚¯ãƒ©ãƒ–ãŒâ€œãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–â€ã¨è©•ä¾¡ã•ã‚Œã‚‹æ§‹é€ </b>ã«ãªã£ã¦ã„ã¾ã™ã€‚</li>
      <li>ã¾ãŸã€å½“ã‚µã‚¤ãƒˆã§åŸºæº–ã¨ã™ã‚‹ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ã‚¹ã‚³ã‚¢(50ä»¥ä¸Š)ã‚’è¶…ãˆã‚‹ã«ã¯ã€æµ¦å’Œã®å ´åˆã€å£²ä¸ŠãŒç´„180å„„å††ã€å¹³å‡è¦³å®¢ãŒ40500äººã€éå»10å¹´J1å¹³å‡é †ä½ãŒ4.5ä½ä»¥ä¸ŠãŒå¿…è¦ã«ãªã‚Šã¾ã™</li>
    </ul>
    <span style="color: #18a; font-size: 0.98em;">â€» ä»Šå¾Œã‚‚æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚„æ„è¦‹ã‚’ã‚‚ã¨ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆäºˆå®šã§ã™ã€‚</span>
  </div>
</div>

<script>
    // === ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•° ===
    let clubData = [];
    let clubLeagueList = [];
    let europePlayers = [];
    let metricChart;

    // === ãƒšãƒ¼ã‚¸åˆ‡ã‚Šæ›¿ãˆ ===
    function showPage(id, btn) {
        document.querySelectorAll('.page-section').forEach(sec => sec.classList.remove('visible'));
        document.getElementById(id).classList.add('visible');

        document.querySelectorAll('.page-title-row').forEach(row => row.style.display = 'none');
        const pageTitleDiv = document.getElementById('page-title-' + id);
        if (pageTitleDiv) pageTitleDiv.style.display = 'flex';

        document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
        if (btn) {
            btn.classList.add('active');
            if(btn.closest('.nav-dropdown')) {
                btn.closest('.nav-dropdown').querySelector('button').classList.add('active');
            }
        }
        
        // â–¼â–¼â–¼ ã€Œ5å¤§ãƒªãƒ¼ã‚°ã€ãƒšãƒ¼ã‚¸è¡¨ç¤ºæ™‚ã®åˆæœŸåŒ–å‡¦ç†ã‚’è¿½åŠ  â–¼â–¼â–¼
        if (id === 'europe' && europePlayers.length > 0) {
            showPlayerTable(); // å¼•æ•°ãªã—ã§å‘¼ã³å‡ºã—ã€å…¨é¸æ‰‹ã‚’è¡¨ç¤º
        }
        // â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²â–²
        
        if(window.updateScoreBtnDisplay) window.updateScoreBtnDisplay();
        
        if (id === 'introduce' && clubLeagueList.length > 0) {
            const activeBtn = document.querySelector('.league-tab-btn.active');
            renderClubLeagueTable(activeBtn ? activeBtn.dataset.league : "J1");
        }
    }
    
    // === åˆæœŸåŒ–å‡¦ç† ===
    document.addEventListener("DOMContentLoaded", () => {
        // --- Jãƒªãƒ¼ã‚°ã‚¯ãƒ©ãƒ–ãƒ‡ãƒ¼ã‚¿ ---
        fetch("data/data.csv")
            .then(response => {
                if (!response.ok) throw new Error(`CSVã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ: ${response.status}`);
                return response.text();
            })
            .then(text => {
                const lines = text.trim().split("\n");
                const headers = lines[0].split(",").map(h => h.trim());
                const dataRows = lines.slice(1);
                clubData = dataRows.map(line => {
                    const values = line.split(",");
                    const obj = {};
                    headers.forEach((h, i) => obj[h] = values[i] ? values[i].trim() : '');
                    obj.name = obj["ã‚¯ãƒ©ãƒ–å"] || 'N/A';
                    obj.revenue = parseFloat(obj["å£²ä¸Šé«˜ï¼ˆå„„å††ï¼‰"]) || 0;
                    obj.audience = parseInt(obj["å¹³å‡è¦³å®¢å‹•å“¡æ•°"]) || 0;
                    obj.titles = parseInt(obj["ã‚¿ã‚¤ãƒˆãƒ«è¨ˆ"]) || 0;
                    obj.sum = parseFloat(obj["ç·åˆçš„ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ã‚¹ã‚³ã‚¢"]) || 0;
                    obj.l = obj["éå»10å¹´J1åœ¨ç±å¹´æ•°"] || '0';
                    obj.m = obj["J1åœ¨ç±10å¹´å¹³å‡é †ä½"] || 'N/A';
                    obj.o = obj["J1åœ¨ç±10å¹´å¹³å‡é †ä½ã‚¹ã‚³ã‚¢"] || 'N/A';
                    obj.p = obj["æ‰€å±ãƒªãƒ¼ã‚°"] || 'N/A';
                    return obj;
                });
                clubData.sort((a, b) => b.sum - a.sum);
                clubLeagueList = clubData;
                renderBig5(clubData);
                renderOthers(clubData);
                renderHistory(clubData);
                showMetricChart('revenue');
                renderClubLeagueTable("J1"); 
            })
            .catch(err => {
                console.error("CSVãƒ‡ãƒ¼ã‚¿ã®å‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:", err);
                document.getElementById('top').innerHTML = `<div style="color:red; text-align:center; padding: 20px;">ã‚¯ãƒ©ãƒ–ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</div>`;
            });

        // --- ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘æ—¥æœ¬äººé¸æ‰‹ãƒ‡ãƒ¼ã‚¿ ---
        fetch("data/europe.csv")
            .then(res => res.text())
            .then(text => {
                const lines = text.trim().split("\n");
                const headers = lines[0].split(",");
                europePlayers = lines.slice(1).map(line => {
                    const vals = line.split(",");
                    const obj = {};
                    headers.forEach((h, i) => obj[h] = vals[i]);
                    return obj;
                });
                // ãƒšãƒ¼ã‚¸ãŒæ—¢ã«é–‹ã‹ã‚Œã¦ã„ãŸã‚‰å†æç”»
                if (document.getElementById('europe').classList.contains('visible')) {
                    showPlayerTable();
                }
            });

        // --- ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š ---
        setupEventListeners();
    });

    // === ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–æŒ‡æ•°ãƒšãƒ¼ã‚¸ ===
    function renderBig5(clubs) {
      const big5 = clubs.slice(0, 5);
      const big5Div = document.getElementById("big5-cards");
      big5Div.innerHTML = "";
      const row1 = document.createElement("div"); row1.className = "big5-row";
      const row2 = document.createElement("div"); row2.className = "big5-row";
      big5.forEach((club, i) => {
        let colorClass = "local";
        if (club.sum >= 30) colorClass = "top-club";
        else if (club.sum >= 20) colorClass = "potential-big";
        else if (club.sum >= 5) colorClass = "middle";
        const isLong = club.name.length >= 10;
        const card = document.createElement("div");
        card.className = `club-card ${colorClass} rank-${i+1}` + (isLong ? " long-title" : "");
        card.innerHTML = `<h3 class="club-title">${club.name}</h3><div class="score-val">ã‚¹ã‚³ã‚¢ï¼š${club.sum.toFixed(1)}</div>`;
        if (i < 3) row1.appendChild(card); else row2.appendChild(card);
      });
      big5Div.appendChild(row1); big5Div.appendChild(row2);
    }
    function renderOthers(clubs) {
      const others = clubs.slice(5);
      const tableDiv = document.getElementById("club-categories");
      tableDiv.innerHTML = "";
      const table = document.createElement("table");
      const thead = table.createTHead(); const headerRow = thead.insertRow();
      ["é †ä½", "ã‚¯ãƒ©ãƒ–å", "åˆç®—ã‚¹ã‚³ã‚¢", "åŒºåˆ†"].forEach(h => {
        const th = document.createElement("th"); th.textContent = h; headerRow.appendChild(th);
      });
      const tbody = table.createTBody();
      others.forEach((club, idx) => {
        let category, colorClass;
        if (club.sum >= 30) { category = "ãƒˆãƒƒãƒ—ã‚¯ãƒ©ãƒ–"; colorClass = "top-club"; }
        else if (club.sum >= 20) { category = "æ½œåœ¨çš„ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–"; colorClass = "potential-big"; }
        else if (club.sum >= 5)  { category = "ä¸­å …ã‚¯ãƒ©ãƒ–"; colorClass = "middle"; }
        else { category = "ãƒ­ãƒ¼ã‚«ãƒ«ã‚¯ãƒ©ãƒ–"; colorClass = "local"; }
        const tr = tbody.insertRow();
        tr.className = colorClass;
        [idx + 6, club.name, club.sum.toFixed(1), category].forEach(val => {
          const td = document.createElement("td"); td.textContent = val; tr.appendChild(td);
        });
      });
      tableDiv.appendChild(table);
    }

    // === ã‚¯ãƒ©ãƒ–æŒ‡æ¨™ãƒšãƒ¼ã‚¸ ===
    function showMetricChart(key) {
      document.querySelectorAll('.metric-btn').forEach(btn => btn.classList.remove('active'));
      const activeBtn = Array.from(document.querySelectorAll('.metric-btn')).find(btn => btn.getAttribute('onclick').includes(key));
      if (activeBtn) activeBtn.classList.add("active");
      const chartData = clubData.map(club => club[key]);
      const labels = clubData.map(club => club.name);
      if (metricChart) metricChart.destroy();
      const ctx = document.getElementById("metricChart").getContext("2d");
      metricChart = new Chart(ctx, {
        type: "bar",
        data: {
          labels: labels,
          datasets: [{
            label: { revenue: "å£²ä¸Šé«˜ï¼ˆå„„å††ï¼‰", audience: "å¹³å‡è¦³å®¢å‹•å“¡ï¼ˆäººæ•°ï¼‰", titles: "ã‚¿ã‚¤ãƒˆãƒ«æ•°" }[key],
            data: chartData,
            backgroundColor: labels.map((_, i) => {
              let sum = clubData[i].sum;
              if (sum >= 30) return "#e94444bb"; else if (sum >= 20) return "#22bbf0cc";
              else if (sum >= 5) return "#bbbbbbc8"; else return "#232947bb";
            }),
            borderWidth: 1
          }]
        },
        options: {
          indexAxis: 'y', responsive: true, maintainAspectRatio: false,
          scales: {
            x: { beginAtZero: true, ticks: { color: "#111" } },
            y: { ticks: { autoSkip: false, color: "#111" } }
          },
          plugins: { legend: { labels: { color: '#111' } }, title: { display: false } }
        }
      });
    }

        // === éå»10å¹´é †ä½ãƒšãƒ¼ã‚¸ ===
    function renderHistory(clubs) {
      const historyDiv = document.getElementById("jleague-history");
      historyDiv.innerHTML = "";
      const hisTable = document.createElement("table");
      const hisThead = hisTable.createTHead(); const hisHeader = hisThead.insertRow();
      ["ã‚¯ãƒ©ãƒ–å", "J1éå»10å¹´åœ¨ç±å¹´æ•°", "J1éå»10å¹´å¹³å‡é †ä½", "J1éå»10å¹´åœ¨ç±ã‚¹ã‚³ã‚¢"].forEach(h => {
        const th = document.createElement("th"); th.textContent = h; hisHeader.appendChild(th);
      });
      const hisTbody = hisTable.createTBody();
      clubs.forEach(club => {
        const tr = hisTbody.insertRow();
        // ãƒ‡ãƒ¼ã‚¿ã‚’ãã®ã¾ã¾è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«ä¿®æ­£
        [club.name, club.l, club.m, club.o].forEach(val => {
          const td = document.createElement("td"); td.textContent = val; tr.appendChild(td);
        });
      });
      historyDiv.appendChild(hisTable);
    }

    // === å„ã‚¯ãƒ©ãƒ–ç´¹ä»‹ãƒšãƒ¼ã‚¸ ===
    function renderClubLeagueTable(league) {
        if (clubLeagueList.length === 0) return;
        const tableDiv = document.getElementById("club-league-table");
        const rows = clubLeagueList.filter(club => club.p === league);
        if (!rows.length) {
            tableDiv.innerHTML = `<div style="padding:16px; color:white;">ã“ã®ãƒªãƒ¼ã‚°ã®ã‚¯ãƒ©ãƒ–ãƒ‡ãƒ¼ã‚¿ã¯ã‚ã‚Šã¾ã›ã‚“</div>`;
            return;
        }
        let html = `<table><thead><tr><th>ã‚¯ãƒ©ãƒ–å</th></tr></thead><tbody>
            ${rows.map(club => `<tr><td style="cursor:pointer; color:#3cf;" onclick="showClubStatus('${club.name}')">${club.name}</td></tr>`).join("")}
            </tbody></table>`;
        tableDiv.innerHTML = html;
    }
    function showClubStatus(clubName) {
      const club = clubData.find(c => c.name === clubName);
      if (!club) return;
      const rank = clubData.findIndex(c => c.name === clubName) + 1;
      const html = `<div style="font-size:1.36em; font-weight:bold; color:#97d7ff; margin-bottom:8px; letter-spacing:0.06em;">${clubName}</div>
          <div style="display:flex; flex-wrap:wrap; gap:13px 38px; font-size:1.13em;">
            <div>ğŸ… <b>æ‰€å±ãƒªãƒ¼ã‚°:</b> ${club.p || '-'}</div>
            <div>ğŸ‘‘ <b>ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ã‚¹ã‚³ã‚¢:</b> ${club.sum ? club.sum.toFixed(1) : '-'} <span style="font-size:0.97em;">ï¼ˆ${rank}ä½ï¼‰</span></div>
            <div>ğŸ’° <b>å£²ä¸Šé«˜:</b> ${club.revenue || '-'} å„„å††</div>
            <div>ğŸ‘¥ <b>å¹³å‡è¦³å®¢æ•°:</b> ${(club.audience || '-').toLocaleString()} äºº</div>
            <div>ğŸ† <b>ã‚¿ã‚¤ãƒˆãƒ«ç²å¾—æ•°:</b> ${club.titles || '-'}</div>
            <div>ğŸ“Š <b>J1åœ¨ç±10å¹´å¹³å‡é †ä½:</b> ${club.m || '-' } ä½</div>
          </div>
          <button onclick="document.getElementById('club-status-board').style.display='none';" style="position:absolute;top:13px;right:14px; background:#29b6e6; border:none; border-radius:7px; color:#fff; padding:5px 13px; font-size:1.01em; cursor:pointer;">é–‰ã˜ã‚‹</button>`;
      const board = document.getElementById("club-status-board");
      board.innerHTML = html; board.style.display = "block";
    }

    // === ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘æ—¥æœ¬äººé¸æ‰‹ãƒšãƒ¼ã‚¸ ===
    function showPlayerTable(country) {
      const div = document.getElementById("player-table-wrap");
      
      let rows;
      // ã‚‚ã—countryãŒæŒ‡å®šã•ã‚Œã¦ã„ã‚Œã°ã€ãã®å›½ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
      if (country) {
        rows = europePlayers.filter(row => (row.å›½ || row.Country) === country);
      } else {
      // æŒ‡å®šã•ã‚Œã¦ã„ãªã‘ã‚Œã°ã€å…¨é¸æ‰‹ã‚’å¯¾è±¡ã«ã™ã‚‹
        rows = [...europePlayers]; // å…¨é¸æ‰‹ã®ã‚³ãƒ”ãƒ¼ã‚’ä½œæˆ
      }
      
      // å¹´é½¢ã®è‹¥ã„é †ã«ä¸¦ã³æ›¿ãˆ
      rows.sort((a, b) => (parseInt(a.å¹´é½¢) || 99) - (parseInt(b.å¹´é½¢) || 99));

      if (!rows.length) {
        div.innerHTML = `<div style="color:#ffe;padding:16px;">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</div>`;
        return;
      }
      
      // countryãŒæŒ‡å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿ã‚¿ã‚¤ãƒˆãƒ«ã‚’è¡¨ç¤º
      const titleHtml = country ? `<h3 style="text-align:center;color:#ffd700;">${country}ã®æ—¥æœ¬äººé¸æ‰‹</h3>` : '';

      // ãƒ†ãƒ¼ãƒ–ãƒ«ã®HTMLç”Ÿæˆ
      let html = titleHtml;
      html += `<div style="display:flex; justify-content:center;"><table style="width:100%; max-width:1000px; min-width:320px; background:transparent; color:#f0f0f0; border-radius:12px; box-shadow:none; margin:auto; border-collapse:collapse;">
            <thead><tr>${Object.keys(rows[0]).map(h => `<th style="padding:10px; background:#299ad3; color:#fff;">${h}</th>`).join("")}</tr></thead>
            <tbody>${rows.map(row => `<tr>${Object.values(row).map(val => `<td style="padding:9px; text-align:center; border-bottom:1px solid #ffffff44;">${val}</td>`).join("")}</tr>`).join("")}</tbody>
          </table></div>`;
      div.innerHTML = html;
    }

    // === ãƒ™ã‚¹ãƒˆ11ãƒšãƒ¼ã‚¸ ===
    window.nowSelectedPosKey = null; let best11Formation = "343"; let best11Selected = {};
    const best11Positions = {
        "343": [{key:"GK",label:"GK"},{key:"CB1",label:"CB1"},{key:"CB2",label:"CB2"},{key:"CB3",label:"CB3"},{key:"MF1",label:"MF1"},{key:"MF2",label:"MF2"},{key:"MF3",label:"MF3"},{key:"MF4",label:"MF4"},{key:"MF5",label:"MF5"},{key:"MF6",label:"MF6"},{key:"FW",label:"FW"}],
        "433": [{key:"GK",label:"GK"},{key:"CB1",label:"CB1"},{key:"CB2",label:"CB2"},{key:"CB3",label:"CB3"},{key:"CB4",label:"CB4"},{key:"MF1",label:"MF1"},{key:"MF2",label:"MF2"},{key:"MF3",label:"CM3"},{key:"MF4",label:"MF4"},{key:"MF5",label:"MF5"},{key:"FW",label:"FW"}]
    };
    const best11PosCoords = {
        "343":{GK:{top:290,left:140},CB1:{top:225,left:50},CB2:{top:235,left:140},CB3:{top:225,left:230},MF1:{top:120,left:40},MF2:{top:120,left:240},MF3:{top:165,left:90},MF4:{top:165,left:190},MF5:{top:60,left:70},FW:{top:25,left:140},MF6:{top:60,left:210}},
        "433":{GK:{top:290,left:140},CB1:{top:200,left:38},CB2:{top:235,left:100},CB3:{top:235,left:190},CB4:{top:200,left:240},MF1:{top:130,left:55},MF2:{top:155,left:140},MF3:{top:130,left:225},MF4:{top:70,left:70},FW:{top:25,left:140},MF5:{top:70,left:210}}
    };
    function initBest11Page() { renderPositionTabs(); renderBest11Table(); renderCourtPlayers(); }
    window.setFormation = function(form, btn) {
        best11Formation = form;
        const formationLabels = { "343": "3-4-3", "433": "4-3-3" };
        document.getElementById("formation-title").textContent = "ãƒ•ã‚©ãƒ¼ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼š" + (formationLabels[best11Formation] || best11Formation);
        document.querySelectorAll('.formation-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active'); best11Selected = {}; initBest11Page();
    }
    function renderPositionTabs() {
        const posDiv = document.getElementById("position-tabs"); if (!posDiv) return;
        const positions = best11Positions[best11Formation];
        let html = '<div style="margin-bottom:7px;font-weight:bold;">ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚’é¸ã‚“ã§ãã ã•ã„</div><div class="position-btn-row">';
        positions.forEach((pos, i) => { html += `<button class="position-btn${i===0?' active':''}" data-pos="${pos.key}" onclick="selectPosition('${pos.key}', this)">${pos.label}</button>`; });
        html += '</div><div id="player-choice-list"></div>';
        posDiv.innerHTML = html;
        setTimeout(() => selectPosition(positions[0].key, posDiv.querySelector('.position-btn')), 10);
    }
    window.selectPosition = function(posKey, btn) {
        window.nowSelectedPosKey = posKey;
        document.querySelectorAll('#position-tabs .position-btn').forEach(b => b.classList.remove('active'));
        if (btn) btn.classList.add('active');
        let listDiv = document.getElementById('player-choice-list'); if (!listDiv) return;
        const searchKey = posKey.replace(/[0-9]/g, '').toUpperCase();
        let players = europePlayers.filter(p => {
            const playerPos = (p['ãƒã‚¸ã‚·ãƒ§ãƒ³'] || p['Position'] || "").toUpperCase();
            if (playerPos === searchKey) return true;
            if (searchKey === 'CB' && playerPos === 'DF') return true;
            return false;
        });
        if (players.length === 0) { listDiv.innerHTML = `<div style="color:white; padding: 10px;">ã“ã®ãƒã‚¸ã‚·ãƒ§ãƒ³ã®é¸æ‰‹ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</div>`; }
        else { listDiv.innerHTML = `<div class="player-choice-row">${players.map(p => `<button style="margin:0 6px 6px 0; padding:6px 16px; border-radius:12px; border:1.4px solid #299ad3; background:#fff; color:#232947; font-weight:bold; font-size:1.09em; cursor:pointer;" onclick="choosePlayer('${posKey}','${p['åå‰']||p['Name']}')">${p['åå‰']||p['Name']}</button>`).join('')}</div>`; }
        renderCourtPlayers();
    }
    function renderBest11Table() {
        const tableDiv = document.getElementById("best11-table");
        const positions = best11Positions[best11Formation];
        const posOrder = [...positions].sort((a,b) => (a.key.startsWith('FW')?-1:1) - (b.key.startsWith('FW')?-1:1) || (b.key.startsWith('MF')?1:-1) - (a.key.startsWith('MF')?1:-1) || (b.key.startsWith('CB')?1:-1) - (a.key.startsWith('CB')?1:-1) || (a.key==='GK'?1:-1));
        let html = '<table><thead><tr><th>ãƒã‚¸ã‚·ãƒ§ãƒ³</th><th>é¸æ‰‹</th><th>ã‚¯ãƒ©ãƒ–</th><th>ãƒªãƒ¼ã‚°</th></tr></thead><tbody>';
        posOrder.forEach(pos => {
            let name = best11Selected[pos.key] || ''; let club = '', league = '';
            if (name) {
                const player = europePlayers.find(p => (p['åå‰']||p['Name']) === name);
                if (player) { club = player['ãƒãƒ¼ãƒ å']||player['Club']||''; league = player['ãƒªãƒ¼ã‚°']||player['League']||''; }
            }
            html += `<tr><td style="font-weight:bold;">${pos.label}</td><td${name ? '' : ' class="unselected"'}>${name || 'æœªé¸æŠ'}</td><td>${club || '-'}</td><td>${league || '-'}</td></tr>`;
        });
        html += "</tbody></table>"; tableDiv.innerHTML = html;
    }
    function renderCourtPlayers() {
        const area = document.getElementById('court-area'); if (!area) return;
        area.innerHTML = '';
        best11Positions[best11Formation].forEach(pos => {
            const c = best11PosCoords[best11Formation][pos.key]; if (!c) return;
            const label = document.createElement('div');
            label.className = 'best11-player-label' + (best11Selected[pos.key] ? '' : ' unselected') + (pos.key === window.nowSelectedPosKey ? ' selected' : '');
            label.style.top = `${c.top}px`; label.style.left = `${c.left}px`;
            let name = best11Selected[pos.key] ? best11Selected[pos.key] : pos.label;
            let fontSize = name.length >= 7 ? '0.80em' : (name.length >= 6 ? '0.89em' : '1em');
            label.innerHTML = `<span style="font-size:${fontSize};">${name}</span>`;
            label.onclick = () => selectPosition(pos.key, document.querySelector(`.position-btn[data-pos="${pos.key}"]`));
            label.style.cursor = "pointer"; area.appendChild(label);
        });
    }
    window.choosePlayer = function(posKey, name) { best11Selected[posKey] = name; renderBest11Table(); renderCourtPlayers(); }
    
    // === ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®šé–¢æ•° ===
    function setupEventListeners() {
        document.querySelectorAll(".country-btn").forEach(btn => {
            btn.addEventListener("click", () => {
                document.querySelectorAll(".country-btn").forEach(b => b.classList.remove("active"));
                btn.classList.add("active");
                showPlayerTable(btn.dataset.country);
            });
        });
        document.querySelectorAll(".league-tab-btn").forEach(btn => {
            btn.addEventListener("click", function() {
                document.querySelectorAll(".league-tab-btn").forEach(b => b.classList.remove("active"));
                this.classList.add("active");
                renderClubLeagueTable(this.dataset.league);
            });
        });
        document.querySelector('.nav-dropdown-content button[onclick*="best11"]').addEventListener("click", () => setTimeout(initBest11Page, 50));
        document.getElementById("copy-best11-img-btn").onclick = function() {
            const captureElem = document.getElementById('best11-capture-area');
            const btn = this;
            const selectedLabel = captureElem.querySelector('.best11-player-label.selected');
            if (selectedLabel) { selectedLabel.classList.remove('selected'); }
            btn.style.visibility = 'hidden';
            html2canvas(captureElem, { backgroundColor: null, scale: 2, useCORS: true }).then(canvas => {
                btn.style.visibility = 'visible';
                if (selectedLabel) { selectedLabel.classList.add('selected'); }
                canvas.toBlob(blob => {
                    navigator.clipboard.write([new ClipboardItem({ "image/png": blob })])
                        .then(() => document.getElementById('copy-best11-img-msg').textContent = 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼')
                        .catch(() => document.getElementById('copy-best11-img-msg').textContent = 'ã‚³ãƒ”ãƒ¼å¤±æ•—');
                });
            });
        };
        const scoreBtn = document.getElementById("score-method-btn");
        const scorePop = document.getElementById("score-method-pop");
        const detailLink = document.getElementById("score-detail-link");
        const detailPop = document.getElementById("score-detail-pop");
        window.updateScoreBtnDisplay = () => {
          if (scorePop) scorePop.style.display = "none";
          if (detailPop) detailPop.style.display = "none";
        }
        if(scoreBtn) scoreBtn.onclick = (e) => { e.stopPropagation(); scorePop.style.display = 'block'; };
        if(detailLink) detailLink.onclick = (e) => { e.preventDefault(); detailPop.style.display = "block"; };
        document.addEventListener("click", (e) => {
          const board = document.getElementById("club-status-board");
          if (board && board.style.display === "block" && !board.contains(e.target) && !e.target.matches("td[onclick^='showClubStatus']")) board.style.display = "none";
          if (scorePop && scorePop.style.display === "block" && !scorePop.contains(e.target) && e.target !== scoreBtn) scorePop.style.display = "none";
          if (detailPop && detailPop.style.display === "block" && !detailPop.contains(e.target) && e.target !== detailLink) detailPop.style.display = "none";
        });
    }

    // === ãƒ–ãƒ­ã‚°æ©Ÿèƒ½ ===
    let blogPosts = []; let blogInitialized = false;
    const listContainer = document.getElementById('blog-list-container');
    const paginationContainer = document.getElementById('pagination');
    const contentDiv = document.getElementById('blog-content');
    const blogPageSection = document.getElementById('blog');
    
    if (!listContainer || !paginationContainer || !contentDiv || !blogPageSection) {
        console.error("ãƒ–ãƒ­ã‚°æ©Ÿèƒ½ã«å¿…è¦ãªHTMLè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚");
    } else {
        const observer = new MutationObserver((mutationsList) => {
            for (const mutation of mutationsList) {
                if (mutation.type === 'attributes' && mutation.attributeName === 'class' && blogPageSection.classList.contains('visible')) {
                    if (!blogInitialized) initializeAndRenderBlog();
                }
            }
        });
        observer.observe(blogPageSection, { attributes: true });
    }
    function initializeAndRenderBlog() {
        if (blogInitialized) return;
        fetch("posts/index.json")
            .then(res => {
                if (!res.ok) throw new Error(`index.jsonã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ${res.status}`);
                return res.json();
            })
            .then(data => {
                if (!Array.isArray(data)) throw new Error("JSONãƒ‡ãƒ¼ã‚¿ãŒé…åˆ—å½¢å¼ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚");
                blogPosts = data.sort((a, b) => new Date(b.date) - new Date(a.date));
                blogInitialized = true;
                renderArticleList(1);
            })
            .catch(err => {
                console.error("ãƒ–ãƒ­ã‚°æ©Ÿèƒ½ã®åˆæœŸåŒ–ä¸­ã«ã‚¨ãƒ©ãƒ¼:", err);
                const errorMessage = `<div style="background:#332222; border:2px solid red; color:white; padding:20px; margin: 20px; text-align:left; font-family:monospace; white-space:pre-wrap; border-radius: 8px;"><h3 style="margin-top:0; color:red;">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</h3><p style="margin-bottom: 5px;"><strong>ã‚¨ãƒ©ãƒ¼ã®ç¨®é¡:</strong></p><p style="background: #553333; padding: 5px;">${err.name || 'ä¸æ˜'}</p><p style="margin-bottom: 5px;"><strong>ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:</strong></p><p style="background: #553333; padding: 5px;">${err.message || 'è©³ç´°ä¸æ˜'}</p><hr><p>ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€é–‹ç™ºè€…ã«ä¼ãˆã¦ãã ã•ã„ã€‚</p></div>`;
                listContainer.innerHTML = errorMessage;
            });
    }
    const articlesPerPage = 18; let currentPage = 1;
    function renderArticleList(page) {
        currentPage = page; listContainer.innerHTML = "";
        listContainer.style.display = 'flex'; contentDiv.style.display = 'none'; paginationContainer.style.display = 'block';
        const start = (page - 1) * articlesPerPage;
        const currentPosts = blogPosts.slice(start, start + articlesPerPage);
        currentPosts.forEach(post => {
            const card = document.createElement('div');
            card.className = 'blog-card';
            card.innerHTML = `<img src="${post.thumbnail}" alt="${post.title}"><div class="blog-card-content"><div class="blog-card-title">${post.title}</div><div class="blog-card-date">${post.date}</div></div>`;
            card.onclick = () => showArticleDetail(post.slug, post.title);
            listContainer.appendChild(card);
        });
        renderPagination();
    }
    function renderPagination() {
        paginationContainer.innerHTML = "";
        const totalPages = Math.ceil(blogPosts.length / articlesPerPage);
        if (totalPages <= 1) return;
        for (let i = 1; i <= totalPages; i++) {
            const btn = document.createElement('button'); btn.textContent = i;
            btn.style.cssText = `margin:0 5px; padding:6px 14px; border:none; border-radius:5px; cursor:pointer; background:${i === currentPage ? '#299ad3' : '#eee'}; color:${i === currentPage ? '#fff' : '#333'};`;
            btn.onclick = () => { renderArticleList(i); window.scrollTo({ top: 0, behavior: "smooth" }); };
            paginationContainer.appendChild(btn);
        }
    }
    function showArticleDetail(slug, title) {
        listContainer.style.display = 'none'; paginationContainer.style.display = 'none';
        fetch(`posts/${slug}.md`)
            .then(res => { if (!res.ok) throw new Error(`Markdownãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: ${slug}.md`); return res.text(); })
            .then(md => {
                const html = marked.parse(md.replace(/^---[\s\S]*?---/, '').trim());
                contentDiv.innerHTML = `<h2>${title}</h2>${html}<div style="text-align:center; margin-top:2em;"><a href="#" onclick="event.preventDefault(); window.showBlogList();" style="color:#299ad3; font-weight:bold; text-decoration:none; border:1px solid #299ad3; padding: 8px 20px; border-radius:8px;">Â« è¨˜äº‹ä¸€è¦§ã«æˆ»ã‚‹</a></div>`;
                contentDiv.style.display = "block"; contentDiv.scrollIntoView({ behavior: "smooth" });
            })
            .catch(err => {
                console.error("è¨˜äº‹è©³ç´°ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:", err);
                contentDiv.innerHTML = `è¨˜äº‹ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚<br><br><a href="#" onclick="event.preventDefault(); window.showBlogList();">ä¸€è¦§ã«æˆ»ã‚‹</a>`;
                contentDiv.style.display = 'block';
            });
    }
    window.showBlogList = function() { renderArticleList(currentPage); }
</script>
</body>
</html>