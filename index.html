<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Jãƒªãƒ¼ã‚°ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–åˆ†æ</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* ã“ã“ã¯ã‚ãªãŸã®å…ƒã®CSSãã®ã¾ã¾ */
    body {
      font-family: 'Segoe UI', 'Noto Sans JP', Arial, sans-serif;
      margin: 0;
      background: linear-gradient(135deg, #232947 0%, #24304e 100%);
      color: #f0f0f0;
    }
    nav { display: flex; justify-content: center; background-color: #25304a; padding: 12px 0 8px 0; gap: 16px;}
    nav button {
      font-size: 1.05rem; padding: 7px 22px; border-radius: 24px; border: none;
      background: linear-gradient(90deg, #274266 0%, #41cdf4 100%);
      color: #fff; margin: 0 6px; cursor: pointer; transition: background 0.2s, transform 0.12s;
      font-weight: bold; letter-spacing: 0.07em;
    }
    nav button.active, nav button:focus {
      background: linear-gradient(90deg, #41cdf4 0%, #274266 100%);
      color: #232947;
      transform: scale(1.06);
    }
    .page-section { display: none; }
    .page-section.visible { display: block !important; }
    main { max-width: 1200px; margin: 0 auto; padding: 0 14px 40px 14px; }
    .page-title-row { display: flex; align-items: center; justify-content: center; margin-top: 38px; margin-bottom: 30px; gap: 14px;}
    .page-title-row h1 { font-size: 2.2rem; font-weight: bold; letter-spacing: 0.1em; margin: 0; color: #eaf7fc; display: flex; align-items: center; gap: 8px;}
    .ball-icon { width: 37px; height: 37px; vertical-align: middle; margin-left: 8px; margin-bottom: 1px;}
    .score-calc-btn { background: linear-gradient(90deg, #f1f1f3 70%, #c0e8fb 100%); border: none; color: #222; font-size: 0.98rem; border-radius: 17px; padding: 5px 16px; margin-left: 16px; font-weight: bold; box-shadow: 0 1px 8px 0 #0001; cursor: pointer; position: relative;}
    .score-calc-pop { display: none; position: absolute; top: 36px; left: 50%; transform: translateX(-50%); background: #232947; color: #fff; border-radius: 12px; box-shadow: 0 2px 10px #1113; padding: 13px 22px 9px 22px; z-index: 10; min-width: 240px; font-size: 1.01rem; text-align: left; line-height: 1.6; white-space: pre-line; border: 1.3px solid #299ad3;}
    .score-calc-btn:hover .score-calc-pop, .score-calc-btn:focus .score-calc-pop { display: block; }
    .score-calc-pop .calc-note { font-size: 0.85em; color: #aaf; margin-top: 7px; }
    .big5-container { display: flex; flex-direction: column; align-items: center; gap: 18px; margin-bottom: 34px; }
    .big5-row { display: flex; gap: 36px; justify-content: center; margin-bottom: 8px; }
    .club-card { border: none; border-radius: 18px; padding: 14px 17px 11px 17px; width: 220px; min-height: 88px; text-align: center; color: #fff; font-size: 1.08rem; box-sizing: border-box; transition: box-shadow 0.2s; box-shadow: 0 2px 13px 0 #23304638; display: flex; flex-direction: column; align-items: center; justify-content: center;}
    .club-card.top-club   { background: linear-gradient(125deg, #e94444 60%, #fd7575 100%); }
    .club-card.potential-big { background: linear-gradient(120deg, #22bbf0 70%, #8ae7fb 100%); }
    .club-card.middle     { background: linear-gradient(125deg, #aaa 60%, #e1e1e1 100%); color: #202028; }
    .club-card.local      { background: linear-gradient(120deg, #232947 60%, #2b3752 100%); }
    .club-card h3.club-title { font-size: 1.16rem; font-weight: bold; margin: 0 0 8px 0; line-height: 1.17; transition: font-size 0.2s; word-break: break-word;}
    .club-card.long-title h3.club-title { font-size: 0.96rem; }
    .club-card .score-val { font-size: 1.07rem; font-weight: 500; margin: 3px 0 0 0; letter-spacing: 0.07em;}
    .club-table-container { margin-top: 32px; }
    table { width: 98%; border-collapse: separate; border-spacing: 0; margin: 0 auto 36px auto; background-color: #293352ee; border-radius: 13px; overflow: hidden; box-shadow: 0 2px 11px 0 #23304634;}
    th, td { border: none; padding: 11px 7px; text-align: center; font-weight: bold;}
    th { background: linear-gradient(90deg, #299ad3 65%, #b0e7fa 100%); color: #fff; font-size: 1.04rem; font-weight: bold; letter-spacing: 0.05em;}
    tr { background: linear-gradient(90deg, #26334e 90%, #233046 100%); font-size: 0.875rem; transition: background 0.13s;}
    tr.potential-big { background: linear-gradient(90deg, #1fb8e4 60%, #b8f4ff 100%); color: #1c1c3b; }
    tr.middle        { background: linear-gradient(90deg, #bdbdbd 60%, #e1e1e1 100%); color: #21213b; }
    tr.local         { background: linear-gradient(90deg, #232947 60%, #2b3752 100%); color: #eee; }
    tr.top-club      { background: linear-gradient(90deg, #e94444 60%, #fd7575 100%); color: #fff; }
    tr:hover { background: #2a4b76cc !important; }
    .table-note { display: inline-block; float: right; font-size: 13px; color: #bbc; margin-bottom: 7px; margin-right: 6px; background: transparent;}
    .metric-btn-row { display: flex; justify-content: center; gap: 15px; margin-bottom: 15px; margin-top: 18px;}
    .metric-btn { background: linear-gradient(90deg, #1fb8e4 70%, #b8f4ff 100%); border: none; color: #202947; font-size: 1.03rem; border-radius: 16px; padding: 6px 22px; font-weight: bold; cursor: pointer; margin: 0 2px; transition: background 0.16s, color 0.1s, transform 0.1s;}
    .metric-btn.active, .metric-btn:focus { background: linear-gradient(90deg, #299ad3 80%, #1fb8e4 100%); color: #fff; transform: scale(1.06);}
    .metrics-chart-wrap { width: 100%; max-width: 1100px; margin: 0 auto 40px auto; background: #fff; border-radius: 18px; padding: 18px 9px 15px 9px; box-shadow: 0 2px 9px #23304622;}
    #metricChart { height: 800px !important; max-width: 1060px;}
    canvas { width: 100% !important; max-width: 1060px; height: 520px !important; background: #fff; margin-bottom: 10px;}
    .blog-list { margin-top: 28px; text-align: left; max-width: 700px; margin-left: auto; margin-right: auto;}
    .blog-list li { margin-bottom: 17px; font-size: 1.09rem; border-left: 4px solid #28c9ed; background: #24334d77; padding: 9px 16px 9px 19px; border-radius: 7px; transition: background 0.18s;}
    .blog-list li:hover { background: #b9e7f826; }
    .blog-list a { color: #21c0ee; font-weight: bold; text-decoration: none; transition: color 0.17s;}
    .blog-list a:hover { color: #f86565; text-decoration: underline; }
    .country-btn {
  background: rgba(255,240,70,0.07);  /* â†ã†ã™ã„é»„è‰²ã§å¸¸ã«å ´æ‰€ãŒåˆ†ã‹ã‚‹ */
  border: 2px solid rgba(255,240,70,0.15);
  cursor: pointer;
  border-radius: 18px;
  outline: none;
  z-index: 5;
  transition: background 0.17s, box-shadow 0.17s, border-color 0.17s;
}
.country-btn:hover, .country-btn.active {
  background: rgba(255,240,70,0.36);
  border: 2.5px solid #ffe552cc;
  box-shadow: 0 0 14px 6px #ffe55288;
  outline: 2px solid #ffe552bb;
}

    @media (max-width: 700px) {
      main { padding: 0 2vw 30vw 2vw;}
      .big5-row { flex-direction: column; gap: 17px;}
      .club-card { width: 90vw; max-width: 310px; min-width: 0;}
      table { width: 100%; }
      .metrics-chart-wrap { max-width: 99vw; }
    }
/* è¿½åŠ ï¼šã‚¹ãƒãƒ›æ™‚ã¯ç¸¦ä¸¦ã³ */
@media (max-width: 900px) {
  #europe-flex-row {
    flex-direction: column !important;
    gap: 24px !important;
    align-items: center !important;
  }
  #map-container {
    margin: 0 auto !important;
  }
  #player-table-wrap {
    max-width: 98vw !important;
    min-width: unset !important;
  }
}
.nav-dropdown {
  position: relative;
  display: inline-block;
}
.nav-dropdown-content {
  display: none;
  position: absolute;
  left: 0;
  top: 42px;
  background: linear-gradient(90deg, #41cdf4 30%, #274266 100%);
  min-width: 170px;
  border-radius: 17px;
  box-shadow: 0 3px 14px 0 #1d2c4b40;
  z-index: 100;
  padding: 5px 0 5px 0;
  border: none;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  left: 0;
  top: 46px;
  background: #fff;
  min-width: 165px;
  max-width: 220px;
  border-radius: 11px;
  box-shadow: 0 4px 14px 0 #2223;
  z-index: 100;
  padding: 0;
  border: 1.3px solid #29b6e6;
}
.nav-dropdown-content button {
  width: 100%;
  background: none;
  border: none;
  color: #21304c;
  padding: 11px 0 11px 0;
  text-align: center;
  font-size: 1.11rem;
  font-weight: bold;
  border-radius: 8px;
  margin: 3px 0;
  cursor: pointer;
  box-shadow: none;
  transition: background 0.14s, color 0.12s;
}
.nav-dropdown-content button:hover,
.nav-dropdown-content button:focus {
  background: #e8faff;
  color: #12b7ea;
}


.nav-dropdown:hover .nav-dropdown-content,
.nav-dropdown:focus-within .nav-dropdown-content {
  display: block;
}
.best11-player-label {
  position: absolute;
  min-width: 62px;
  max-width: 68px;     /* â†è¿½åŠ : æœ€å¤§å¹…ã‚’æ±ºã‚ã¦â€¦ */
  width: 68px;         /* â†è¿½åŠ : å›ºå®šå¹…æ¨å¥¨ï¼ˆå¿…è¦ãªã‚‰èª¿æ•´ï¼‰ */
  height: 24px;        /* â†è¿½åŠ : é«˜ã•ã‚‚çµ±ä¸€ã€å¿…è¦ã«å¿œã˜ã¦èª¿æ•´ */
  padding: 3.5px 8px 2.5px 8px;
  background: rgba(36,48,78,0.87);
  color: #ffd700;
  font-size: 0.90rem;
  font-weight: bold;
  text-align: center;
  border-radius: 13px;
  border: 1.2px solid #ffd70066;
  z-index: 5;
  box-shadow: 0 1px 7px #1128;
  user-select: none;
  transition: background 0.14s;
  display: flex;                /* â†è¿½åŠ : FlexåŒ– */
  align-items: center;
  justify-content: center;
  overflow: hidden;             /* â†è¿½åŠ : ã¯ã¿å‡ºã—é˜²æ­¢ */
  line-height: 1.15;
}
.best11-player-label span {
  display: block;
  width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-size: 1em;
  transition: font-size 0.15s;
}

.best11-player-label.unselected {
  background:rgba(90,100,120,0.43);
  color:#fff7;
  border:1.2px dashed #fff3;
}
#best11-table table {
  width: 100%;
  max-width: 700px;
  min-width: 220px;
  margin: 0 auto 18px auto;
  background: #f9fcff;
  color: #21304c;
  border-radius: 16px;
  box-shadow: 0 2px 18px #2330461a;
  font-size: 1.08rem;
  border-collapse: separate;
  border-spacing: 0;
  overflow: hidden;
}
#best11-table th, #best11-table td {
  padding: 13px 8px;
  text-align: center;
  border-bottom: 1.5px solid #e8edf6;
}
#best11-table th {
  background: linear-gradient(90deg, #27aee7 65%, #b0e7fa 100%);
  color: #fff;
  font-size: 1.13rem;
  font-weight: bold;
  letter-spacing: 0.06em;
}
#best11-table tr:last-child td {
  border-bottom: none;
}
#best11-table tr:nth-child(even) td {
  background: #f2f6fa;
}
#best11-table tr:nth-child(odd) td {
  background: #ffffff;
}
#best11-table td.unselected {
  color: #c5c5c5;
  font-style: italic;
}
#best11-table table {
  font-size: 0.96rem;        /* å°ã•ã‚ */
}
#best11-table th, #best11-table td {
  padding: 5px 7px !important;  /* ä¸Šä¸‹paddingã‚’å°ã•ã */
  line-height: 1.1;
}
#court-area {
  margin: 0 auto 8px auto;
}
#position-tabs {
  margin-top: 13px;
  margin-bottom: 0;
  text-align: center;
}
.position-btn.active {
  background: linear-gradient(90deg, #27aee7 60%, #aaf7fd 100%);
  color: #143060;
  border: 2px solid #299ad3;
  box-shadow: 0 2px 6px #27aee74c;
  transform: scale(1.08);
}
.best11-player-label.selected {
  background: linear-gradient(90deg, #27aee7 60%, #aaf7fd 100%);
  color: #143060;
  border: 2px solid #299ad3;
  box-shadow: 0 2px 9px #27aee777, 0 1px 7px #1128;
  z-index: 10;
}
#best11-flex {
  display: flex;
  gap: 38px;
  align-items: flex-start;
  min-height: 420px;
  /* æ¨ªå¹…ã‚‚å›ºå®šï¼ */
  width: 820px;  /* å¿…è¦ãªã‚‰å¥½ã¿ã«åˆã‚ã›ã¦ */
  max-width: 820px;
}

#court-area {
  min-width: 360px;
  max-width: 360px;
  width: 360px;
  min-height: 350px;
  max-height: 350px;
  height: 350px;
}

#best11-table {
  min-width: 370px;
  max-width: 510px;
  width: 510px;
}
#player-choice-list {
  min-width: 370px;
  max-width: 370px;
  width: 370px;
}
#best11-capture-core {
  display: flex;
  flex-direction: row;
  gap: 25px;
  align-items: flex-start;
  justify-content: center;
  width: 790px;   /* æ¨ªå¹…ã¯å¥½ã¿ã§èª¿æ•´å¯ */
  max-width: 100vw;
  margin: 0 auto 18px auto;
}
#best11-capture-core {
  /* æ—¢å­˜ã®å¹…ã‚„flexæŒ‡å®šã¯ãã®ã¾ã¾ */
  padding: 38px 48px 38px 48px;  /* â†ä¸Šä¸‹å·¦å³ã«ä½™ç™½ï¼ˆãŠå¥½ã¿ã§èª¿æ•´ï¼‰ */
  background: null;              /* ç”»åƒç”¨ãªã®ã§ç™½èƒŒæ™¯ã«ã™ã‚‹ã®ãŒãŠã™ã™ã‚ */
  border-radius: 22px;           /* è§’ä¸¸ã‚‚å¥½ã¿ã«å¿œã˜ã¦ */
  box-shadow: 0 2px 28px #23304612; /* è»½ã„å½±ã‚‚ã¤ã‘ã‚‹ã¨ç”»åƒã¨ã—ã¦æ˜ ãˆã‚‹ */
}

#court-area {
  min-width: 360px;
  max-width: 360px;
  width: 360px;
  min-height: 350px;
  max-height: 350px;
  height: 350px;
  margin-bottom: 0;
}
#best11-table {
  min-width: 370px;
  max-width: 510px;
  width: 510px;
}
#best11-capture-area {
  padding-top: 44px;   /* â† å¥½ããªæ•°å€¤ã§ */
  /* ä¾‹: 36pxã€50pxãªã©ãŠå¥½ã¿ã§ */
}
#best11-capture-area {
  /* ä»¥ä¸‹ã‚’CSSã¾ãŸã¯styleå±æ€§ã§æŒ‡å®š */
  width: 1200px;
  min-width: 900px;  /* ã“ã“ã§ã‚³ãƒ¼ãƒˆï¼‹ãƒ†ãƒ¼ãƒ–ãƒ«ãŒåã¾ã‚‹å¹…ã«èª¿æ•´ */
  max-width: 1200px; /* å¿…è¦ãªã‚‰ */
  box-sizing: border-box;
  padding: 26px 22px 22px 22px;
  /* ãã®ä»–ã€borderã‚„backgroundã¯ãã®ã¾ã¾ */
}
#best11-capture-area {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 1200px;  /* â† è¿½åŠ ã€‚ä¸­èº«ã®å¹…ã«ãƒ•ã‚£ãƒƒãƒˆ */
  min-width: 900px;    /* å¿…è¦ã«å¿œã˜ã¦èª¿æ•´ */
  max-width: 1200px;
  margin: 100px auto 40px auto;
  padding: 26px 22px 22px 22px;
  /* ...ä»–ã¯ãã®ã¾ã¾ */
}
#best11-capture-area {
  background: linear-gradient(135deg, #232947 0%, #24304e 100%);
  /* ã“ã‚Œä»¥å¤–ã¯ãã®ã¾ã¾ */
}

.position-btn-row {
  display: flex;
  flex-wrap: wrap;
  gap: 3px 7px;
  justify-content: center;   /* â†ä¸­å¤®å¯„ã›è¿½åŠ  */
  margin-bottom: 14px;
}
#player-choice-list {
  width: auto !important;
  min-width: 0 !important;
  max-width: 100% !important;
  display: flex;
  justify-content: center;
}
.player-choice-row {
  width: auto !important;
}
#best11-table-container {
  position: relative;
}

#table-footer {
  text-align: right;
  font-size: 20px;    /* â†ã“ã“ã‚’å¤§ããï¼ˆä¾‹: 1.4remï¼‰ */
  color: #888;
  margin-top: 4px;
  user-select: none;
  font-weight: bold;    /* å¤ªå­—ã«ã™ã‚‹ãªã‚‰è¿½åŠ  */
  letter-spacing: 0.08em; /* å°‘ã—é–“éš”ã‚ã‘ã‚‹ãªã‚‰ */
}
.league-tab-btn {
  font-size: 1.04rem;
  padding: 6px 23px;
  margin: 0 6px 6px 0;
  border-radius: 20px;
  border: none;
  background: linear-gradient(90deg, #41cdf4 0%, #274266 100%);
  color: #fff;
  font-weight: bold;
  letter-spacing: 0.08em;
  cursor: pointer;
  transition: background 0.18s, color 0.1s;
}
.league-tab-btn.active,
.league-tab-btn:focus {
  background: linear-gradient(90deg, #274266 0%, #41cdf4 100%);
  color: #21304c;
  transform: scale(1.07);
}
#club-status-board {
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -53%);
  z-index: 9999;
  max-width: 97vw;
  width: 480px;
  background: linear-gradient(115deg, #1e283f 80%, #299ad3 100%);
  color: #fff;
  border-radius: 17px;
  box-shadow: none;
  padding: 32px 28px 20px 28px;
  font-size: 1.11rem;
  display: none;
}
@media (max-width: 700px) {
  #club-status-board {
    width: 97vw !important;
    min-width: unset !important;
    max-width: 99vw !important;
    left: 50vw;
    top: 50vh;
    transform: translate(-50%, -50%);
    padding: 18px 3vw 10px 3vw;
  }
}

  </style>
</head>
<body>
  <main>
<nav>
  <button onclick="showPage('top', this)" class="active">ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–æŒ‡æ•°</button>
  <button onclick="showPage('metrics', this)">ã‚¯ãƒ©ãƒ–æŒ‡æ¨™</button>
  <button onclick="showPage('history', this)">éå»10å¹´é †ä½</button>
  <button onclick="showPage('introduce', this)">å„ã‚¯ãƒ©ãƒ–ç´¹ä»‹</button>
  <!-- â–¼ã“ã“ã ã‘è¿½åŠ ï¼ˆã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼‰ -->
  <span class="nav-dropdown">
    <button onclick="showPage('europe', this)" id="nav-europe-btn">5å¤§ãƒªãƒ¼ã‚°æ—¥æœ¬äººé¸æ‰‹</button>
    <span class="nav-dropdown-content">
      <button onclick="event.stopPropagation();showPage('best11',this);">ãƒ™ã‚¹ãƒˆ11ã‚’ä½œã‚‹</button>
    </span>
  </span>
  <button onclick="showPage('blog', this)">è¨˜äº‹</button>
</nav>

    <!-- ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆä¸­ç•¥ï¼‰ -->
    <div id="page-title-top" class="page-title-row" style="display:flex;">
      <h1>
        Jãƒªãƒ¼ã‚° ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–æŒ‡æ•°ğŸ“Š
        <span class="score-calc-btn" tabindex="0">ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–æŒ‡æ•°ã¨ã¯
  <span class="score-calc-pop">
Jãƒªãƒ¼ã‚°å„ã‚¯ãƒ©ãƒ–ãŒã©ã‚Œã ã‘ã€Œãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ã€ã«è¿‘ã¥ã„ã¦ã„ã‚‹ã®ã‹ã‚’ã€å®Ÿç¸¾ã‚„äººæ°—ãªã©4ã¤ã®æŒ‡æ¨™ã‚’åŸºã«ã‚¹ã‚³ã‚¢åŒ–ã—ãŸã‚‚ã®ã§ã™ã€‚

ãƒ»<b>50ä»¥ä¸Š</b>ï¼š<span style="color:#ffd700;font-weight:bold;">ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–</span>
ãƒ»<b>30ï½49.9</b>ï¼š<span style="color:#e94444;font-weight:bold;">æœ‰æœ›ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–</span>
ãƒ»<b>20ï½29.9</b>ï¼š<span style="color:#22bbf0;font-weight:bold;">æ½œåœ¨çš„ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–</span>
ãƒ»<b>5ï½19.9</b>ï¼š<span style="color:#999;font-weight:bold;">ä¸­å …ã‚¯ãƒ©ãƒ–</span>
ãƒ»<b>4.9ä»¥ä¸‹</b>ï¼š<span style="color:#aaa;font-weight:bold;">ãƒ­ãƒ¼ã‚«ãƒ«ã‚¯ãƒ©ãƒ–</span>
    <div class="calc-note">
â€»2024å¹´ã¾ã§ã®ãƒ‡ãƒ¼ã‚¿ã§è¨ˆç®—
â€»è©³ã—ãã¯ã‚¹ã‚³ã‚¢è¨ˆç®—æ–¹æ³•ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
    </div>
  </span>
</span>

      </h1>
    </div>
    <div id="page-title-metrics" class="page-title-row" style="display:none;"><h1>ã‚¯ãƒ©ãƒ–æŒ‡æ¨™</h1></div>
    <div id="page-title-history" class="page-title-row" style="display:none;"><h1>Jãƒªãƒ¼ã‚°éå»ãƒ‡ãƒ¼ã‚¿</h1></div>
    <div id="page-title-introduce" class="page-title-row" style="display:none;"><h1>å„ã‚¯ãƒ©ãƒ–ç´¹ä»‹</h1></div>
   <div id="page-title-europe" class="page-title-row" style="display:none;"><h1>25-26ã‚·ãƒ¼ã‚ºãƒ³ 5å¤§ãƒªãƒ¼ã‚°æ—¥æœ¬äººé¸æ‰‹</h1></div>
<div id="page-title-best11" class="page-title-row" style="display:none;"><h1>ãƒ™ã‚¹ãƒˆ11ã‚’ä½œã‚‹</h1></div>
<div id="page-title-blog" class="page-title-row" style="display:none;"><h1>è¨˜äº‹ãƒ»ãƒ–ãƒ­ã‚°</h1></div>

    
    <!-- å„ãƒšãƒ¼ã‚¸ -->
    <div id="top" class="page-section visible">
      <div class="big5-container" id="big5-cards"></div>
      <div class="club-table-container">
        <h2 style="text-align:center; margin-bottom:8px; color:#baf7fa; font-size:1.25rem;">6ä½ä»¥ä¸‹ã‚¯ãƒ©ãƒ–</h2>
        <div id="club-categories"></div>
      </div>
    </div>
    <div id="metrics" class="page-section">
      <span class="table-note">
â€»ä¸¦ã³ã¯ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ã‚¹ã‚³ã‚¢é †<br>
â€»æŸãƒ»æ¹˜å—ã®å£²ä¸Šã¯2023å¹´</span>
      <div class="metric-btn-row">
        <button class="metric-btn active" onclick="showMetricChart('revenue')">å£²ä¸Šé«˜ï¼ˆ2024ï¼‰</button>
        <button class="metric-btn" onclick="showMetricChart('audience')">è¦³å®¢å‹•å“¡æ•°ï¼ˆ2024ï¼‰</button>
        <button class="metric-btn" onclick="showMetricChart('titles')">ã‚¿ã‚¤ãƒˆãƒ«æ•°ï¼ˆ2024ã¾ã§ï¼‰</button>
      </div>
      <div class="metrics-chart-wrap">
        <canvas id="metricChart" width="1000" height="520"></canvas>
      </div>
    </div>
    <div id="history" class="page-section">
      <span class="table-note">
â€»ä¸¦ã³ã¯ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ã‚¹ã‚³ã‚¢é †<br>
â€»åœ¨ç±ã—ã¦ã„ãªã„å¹´ã¯21ä½ã§è¨ˆç®—</span>
      <div id="jleague-history"></div>
    </div>
    <div id="introduce" class="page-section">
<div id="club-status-board" style="display:none;"></div>
  <div id="club-league-tabs" style="text-align:center; margin-bottom:20px;">
    <button class="league-tab-btn active" data-league="J1">J1</button>
    <button class="league-tab-btn" data-league="J2">J2</button>
    <button class="league-tab-btn" data-league="J3">J3</button>
    <button class="league-tab-btn" data-league="JFL">JFL</button>
  </div>
  <div id="club-league-table"></div>
</div>

  <!-- â˜…â˜…â˜… ã“ã“ã‹ã‚‰ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘æ—¥æœ¬äººé¸æ‰‹ãƒšãƒ¼ã‚¸ï¼ˆæ–°ä»•æ§˜ï¼‰ â˜…â˜…â˜… -->
<div id="europe" class="page-section" style="display:none;">
  <h2 style="text-align:center;"></h2>
  <div id="europe-flex-row" style="display:flex; flex-direction:row; gap:36px; align-items:flex-start; justify-content:flex-start;">
    <!-- åœ°å›³ï¼‹ã‚¯ãƒªãƒƒã‚¯ã‚¨ãƒªã‚¢ -->
    <div id="map-container" style="position:relative; width:430px; height:410px; flex-shrink:0;">
      <img src="img/europe.png" alt="ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘åœ°å›³" width="430" height="410" style="border-radius:13px; display:block;">
      <!-- ã‚¤ãƒ³ã‚°ãƒ©ãƒ³ãƒ‰ -->
      <button class="country-btn" data-country="ã‚¤ãƒ³ã‚°ãƒ©ãƒ³ãƒ‰" style="position:absolute; left:30px; top:200px; width:60px; height:70px;"></button>
      <!-- ã‚¹ãƒšã‚¤ãƒ³ -->
      <button class="country-btn" data-country="ã‚¹ãƒšã‚¤ãƒ³"   style="position:absolute; left:10px; top:335px; width:70px; height:60px;"></button>
      <!-- ãƒ•ãƒ©ãƒ³ã‚¹ -->
      <button class="country-btn" data-country="ãƒ•ãƒ©ãƒ³ã‚¹"   style="position:absolute; left:70px; top:280px; width:65px; height:60px;"></button>
      <!-- ã‚¤ã‚¿ãƒªã‚¢ -->
      <button class="country-btn" data-country="ã‚¤ã‚¿ãƒªã‚¢"   style="position:absolute; left:160px; top:320px; width:50px; height:80px;"></button>
      <!-- ãƒ‰ã‚¤ãƒ„ -->
      <button class="country-btn" data-country="ãƒ‰ã‚¤ãƒ„"     style="position:absolute; left:130px; top:240px; width:60px; height:60px;"></button>
    </div>
    <!-- è¡¨è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
    <div id="player-table-wrap" style="min-width:280px; max-width:1000px; width:100%; padding-top:9px;"></div>
  </div>
</div>
<div id="best11" class="page-section" style="display:none;">
  <!-- ã‚­ãƒ£ãƒ—ãƒãƒ£æ ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ï¼‹ã‚³ãƒ¼ãƒˆï¼‹ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰-->
  <div id="best11-capture-area"
    style="position:relative; max-width:950px; padding:26px 22px 22px 22px; border-radius:28px; box-shadow:0 4px 26px #2237,0 2px 8px #2236; border:2.2px solid #29b6e6; display:flex; flex-direction:column; align-items:center;">
    <div style="font-size:2.1em; font-weight:bold; color:#fff; margin-bottom:8px;">#ã‚ãªãŸã®ãƒ™ã‚¹ãƒˆã‚¤ãƒ¬ãƒ–ãƒ³</div>
    <div id="formation-title" style="font-size:1.13em; color:#eaf7fc; margin-bottom:14px;">ãƒ•ã‚©ãƒ¼ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼š3-4-3</div>
    <div id="best11-capture-core" style="display:flex; gap:36px; align-items:flex-start;">
      <div style="min-width:370px; max-width:380px; position:relative;">
        <img src="img/court.png"
          style="width:360px;height:350px;border-radius:16px;box-shadow:0 2px 10px #0017;display:block;position:absolute;left:0;top:0;z-index:1;">
        <div id="court-area" style="position:absolute;top:0;left:0;width:360px;height:350px;z-index:2;"></div>
      </div>
<div style="flex:1; position: relative; max-width: 510px; margin: 0 auto;">
  <div id="best11-table"></div>
  <div id="table-footer" style="text-align: right; color: #888; margin-top: 4px; user-select: none;">
    Jleague-big-club.com
  </div>
</div>


    <!-- ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ï¼ˆçµ¶å¯¾é…ç½®ã€ã‚­ãƒ£ãƒ—ãƒãƒ£ç¯„å›²å¤–ï¼‰ -->
    <button id="copy-best11-img-btn" style="position:absolute; right:24px; top:18px; background:#2ab8f2; color:#fff; border:none; border-radius:12px; padding:10px 23px; font-size:1.08em; font-weight:bold; z-index:100; box-shadow:0 2px 12px #0003; cursor:pointer;">ç”»åƒã‚’ã‚³ãƒ”ãƒ¼</button>
    <span id="copy-best11-img-msg" style="position:absolute; right:26px; top:65px; color:#fff970; font-size:1em;"></span>
  </div>
</div>
<!-- ãƒ•ã‚©ãƒ¼ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼†é¸æ‰‹é¸æŠã¯æ ã®ä¸‹ -->
  <div id="best11-controls">
<div id="formation-buttons" style="text-align:center;margin:19px auto 8px auto;">
  <button class="formation-btn active" onclick="setFormation('343', this)">3-4-3</button>
  <button class="formation-btn" onclick="setFormation('433', this)">4-3-3</button>
</div>
<div id="position-tabs" style="max-width:950px; margin:0 auto 26px auto;"></div>
</div>

<!-- â˜…â˜…â˜… ã“ã“ã¾ã§ â˜…â˜…â˜… -->
    <div id="blog" class="page-section">
      <ul class="blog-list">
        <li><a href="https://note.com/ã‚ãªãŸã®noteè¨˜äº‹URL" target="_blank" rel="noopener">Jãƒªãƒ¼ã‚°ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ã‚’ã€Œæ•°å€¤ã€ã§åˆ†è§£ã—ã¦ã¿ãŸã€noteè¨˜äº‹ä¾‹ã€‘</a></li>
        <li><a href="#">è¦³å®¢å‹•å“¡æ•°ã®çµŒå¹´å¤‰åŒ–ï¼ˆæº–å‚™ä¸­ï¼‰</a></li>
        <li><a href="#">ã‚³ãƒ©ãƒ ï¼šJãƒªãƒ¼ã‚°è¦³æˆ¦ã®æ¥½ã—ã¿æ–¹ï¼ˆæº–å‚™ä¸­ï¼‰</a></li>
      </ul>
    </div>
  </main>
<!-- ã‚¹ã‚³ã‚¢è¨ˆç®—æ–¹æ³•ãƒœã‚¿ãƒ³ï¼†ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ— -->
<button id="score-method-btn"
  style="position: fixed; bottom: 27px; right: 24px; z-index: 9999; background: #fff; color: #232947;
         font-weight: bold; border: none; border-radius: 28px; box-shadow: 0 2px 14px #2222;
         padding: 11px 21px; font-size: 1.10rem; cursor: pointer; display: none;">
  ã‚¹ã‚³ã‚¢è¨ˆç®—æ–¹æ³•
</button>

<div id="score-method-pop"
  style="display:none; position: fixed; bottom: 77px; right: 33px; min-width: 330px; max-width: 95vw;
         background: #fff; color: #222; border-radius: 17px; box-shadow: 0 2px 19px #2226;
         padding: 22px 22px 18px 24px; z-index: 10001; font-size: 1.04rem; line-height: 1.7;
         border: 1.4px solid #29b6e6;">
  <div style="font-size: 1.18em; font-weight: bold; margin-bottom: 11px;">ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–æŒ‡æ•°ã®è¨ˆç®—æ–¹æ³•</div>
  <ul style="margin:0 0 0 1em; padding: 0 0 0 0.6em;">
    <li><b>å£²ä¸Šã‚¹ã‚³ã‚¢ï¼š</b> = å£²ä¸Šé«˜ï¼ˆå„„å††ï¼‰ Ã· 200 Ã— 100</li>
    <li><b>è¦³å®¢ã‚¹ã‚³ã‚¢ï¼š</b> = å¹³å‡è¦³å®¢å‹•å“¡æ•° Ã· 45,000 Ã— 100</li>
    <li><b>ã‚¿ã‚¤ãƒˆãƒ«ã‚¹ã‚³ã‚¢ï¼š</b> = ã‚¿ã‚¤ãƒˆãƒ«æ•°ï¼ˆã‚¹ãƒ¼ãƒ‘ãƒ¼æ¯é™¤ãï¼‰ Ã· 98 Ã— 100</li>
    <li><b>J1åœ¨ç±10å¹´å¹³å‡é †ä½ã‚¹ã‚³ã‚¢ï¼š</b> = 21 âˆ’ J1åœ¨ç±10å¹´å¹³å‡é †ä½</li>
    <li style="margin-top:7px;"><b>ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ã‚¹ã‚³ã‚¢ï¼š</b><br>
      = å£²ä¸Šã‚¹ã‚³ã‚¢ Ã— 0.3 ï¼‹ è¦³å®¢ã‚¹ã‚³ã‚¢ Ã— 0.15 ï¼‹ ã‚¿ã‚¤ãƒˆãƒ«ã‚¹ã‚³ã‚¢ Ã— 0.25 ï¼‹ å¹³å‡é †ä½ã‚¹ã‚³ã‚¢ Ã— 0.3
    </li>
  </ul>
  <!-- ã“ã“ã«ãƒªãƒ³ã‚¯ã‚’è¿½åŠ  -->
  <div style="text-align:right; margin-top:14px;">
    <a href="#" id="score-detail-link"
       style="color:#299ad3; text-decoration:underline; font-weight:bold; font-size:0.98em; cursor:pointer;">
      æ•°å€¤ã®è¨­å®šãªã©è©³ç´°
    </a>
  </div>
<div id="score-detail-pop"
     style="display:none; position: fixed; bottom: 77px; right: 33px; min-width: 330px; max-width: 95vw;
            background: #fff; color: #222; border-radius: 17px; box-shadow: 0 2px 19px #2226;
            padding: 22px 22px 18px 24px; z-index: 10001; font-size: 1.04rem; line-height: 1.7;
            border: 1.4px solid #29b6e6;
            max-height: 72vh; overflow-y: auto;">
 <div style="font-size: 1.06em; margin-top: 19px; line-height: 1.85;">
  <b>ãªãœã“ã®æŒ‡æ¨™ã‚’ä½¿ã†ã®ã‹ï¼Ÿ</b><br>
  <ul style="margin-top: 8px;">
    <li>æœ¬ã‚µã‚¤ãƒˆã®ã€Œãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–æŒ‡æ•°ã€ã¯ã€<b>æ—¥æœ¬ã‚µãƒƒã‚«ãƒ¼ç•Œã§â€œãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–â€ã¨ã•ã‚Œã‚‹æ¡ä»¶</b>ã‚’ã§ãã‚‹ã ã‘æ•°å€¤ã§å¯è¦–åŒ–ã™ã‚‹ãŸã‚ã«ä½œæˆã—ã¾ã—ãŸã€‚</li>
    <li>ã€Œãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ã€ã¨å‘¼ã°ã‚Œã‚‹ã‚¯ãƒ©ãƒ–ã¯ã€<b>çµŒå–¶è¦æ¨¡ï¼ˆå£²ä¸Šï¼‰</b>ãƒ»<b>è¦³å®¢å‹•å“¡</b>ãƒ»<b>ã‚¿ã‚¤ãƒˆãƒ«ç²å¾—æ•°</b>ãƒ»<b>J1ã§ã®å®Ÿç¸¾</b>ã¨ã„ã†4ã¤ã®å´é¢ã§æ˜ã‚‰ã‹ãªå¼·ã¿ã‚’æŒã£ã¦ã„ã¾ã™ã€‚</li>
    <li>ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘ä¸»è¦ãƒªãƒ¼ã‚°ã®ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ï¼ˆä¾‹ï¼šãƒãƒ³ãƒã‚§ã‚¹ã‚¿ãƒ¼Uã€ãƒ¬ã‚¢ãƒ«ãƒ»ãƒãƒ‰ãƒªãƒ¼ãƒ‰ãªã©ï¼‰ã‚‚ã€çµŒå–¶è¦æ¨¡ã‚„è¦³å®¢æ•°ã€ã‚¿ã‚¤ãƒˆãƒ«ç²å¾—ã€å®‰å®šã—ãŸä¸Šä½æˆç¸¾ã¨ã„ã£ãŸæŒ‡æ¨™ãŒæ³¨ç›®ã•ã‚Œã¦ã„ã¾ã™ã€‚</li>
    <li>Jãƒªãƒ¼ã‚°ã§ã‚‚åŒã˜è¦–ç‚¹ã§æ¯”è¼ƒã§ãã‚‹ã‚ˆã†ã€<b>4ã¤ã®æŒ‡æ¨™</b>ã‚’çµ„ã¿åˆã‚ã›ã¦ã‚¹ã‚³ã‚¢åŒ–ã—ã¦ã„ã¾ã™ã€‚</li>
  </ul>
  <b>ãªãœã“ã®æ¯”ç‡ï¼ˆé‡ã¿ï¼‰ãªã®ã‹ï¼Ÿ</b><br>
  <ul style="margin-top: 8px;">
    <li>å£²ä¸Šé«˜ã‚„è¦³å®¢å‹•å“¡ã¯â€œäººæ°—â€ã‚„â€œå½±éŸ¿åŠ›â€ã®æŒ‡æ¨™ã€ã‚¿ã‚¤ãƒˆãƒ«ã‚„é †ä½ã¯â€œå®Ÿç¸¾â€ã‚„â€œå¼·ã•â€ã®æŒ‡æ¨™ã§ã™ã€‚</li>
    <li>ã‚¯ãƒ©ãƒ–ã®ç·åˆåŠ›ãƒ»â€œãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ã‚‰ã—ã•â€ãŒæœ€ã‚‚åæ˜ ã•ã‚Œã‚‹ã‚ˆã†ã€<b>å£²ä¸Š/é †ä½=30%ãšã¤ã€ã‚¿ã‚¤ãƒˆãƒ«=25%ã€è¦³å®¢å‹•å“¡=15%</b>ã®æ¯”ç‡ã§èª¿æ•´ã—ã¦ã„ã¾ã™ã€‚â€»è¦³å®¢å‹•å“¡ã¯ç„¡æ–™è¦³å®¢ã‚‚å«ã‚€ã®ã§æ¯”é‡ã¯ä½ãè¨­å®š</li>
  </ul>
  <b>ã€ä¾‹ã€‘æµ¦å’Œãƒ¬ãƒƒã‚ºã®ã‚¹ã‚³ã‚¢</b><br>
  <ul style="margin-top: 8px;">
    <li>2024å¹´æ™‚ç‚¹ã§ã€æµ¦å’Œãƒ¬ãƒƒã‚ºã¯ã€Œéå»10å¹´ã®J1å¹³å‡é †ä½ã€ã¯7.2ä½ã§ã™ãŒã€ã€Œå£²ä¸Šé«˜ã€ã€Œè¦³å®¢å‹•å“¡æ•°ã€ã€Œã‚¿ã‚¤ãƒˆãƒ«æ•°ã€ã¯Jãƒªãƒ¼ã‚°ãƒˆãƒƒãƒ—ã‚¯ãƒ©ã‚¹ã§ã™ã€‚</li>
    <li>ãã®ãŸã‚ã€æŒ‡æ¨™ã®åˆè¨ˆã‚¹ã‚³ã‚¢ãŒã‚‚ã£ã¨ã‚‚é«˜ãã€ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–æŒ‡æ•°1ä½ã¨ãªã‚Šã¾ã™ã€‚</li>
    <li>ã“ã®ã‚ˆã†ã«ã€<b>çµŒå–¶è¦æ¨¡ãƒ»äººæ°—ãƒ»å¼·ã•ã®å…¨ã¦ã§éš›ç«‹ã¤ã‚¯ãƒ©ãƒ–ãŒâ€œãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–â€ã¨è©•ä¾¡ã•ã‚Œã‚‹æ§‹é€ </b>ã«ãªã£ã¦ã„ã¾ã™ã€‚</li>
<li>ã¾ãŸã€å½“ã‚µã‚¤ãƒˆã§åŸºæº–ã¨ã™ã‚‹ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ã‚¹ã‚³ã‚¢(50ä»¥ä¸Š)ã‚’è¶…ãˆã‚‹ã«ã¯ã€æµ¦å’Œã®å ´åˆã€å£²ä¸ŠãŒç´„180å„„å††ã€å¹³å‡è¦³å®¢ãŒ40500äººã€éå»10å¹´J1å¹³å‡é †ä½ãŒ4.5ä½ä»¥ä¸ŠãŒå¿…è¦ã«ãªã‚Šã¾ã™</li>  
</ul>
  <span style="color: #18a; font-size: 0.98em;">
    â€» ä»Šå¾Œã‚‚æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚„æ„è¦‹ã‚’ã‚‚ã¨ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆäºˆå®šã§ã™ã€‚
  </span>
</div>

  <script>
    // ãƒšãƒ¼ã‚¸åˆ‡æ›¿
    function showPage(id, btn) {
  // ã™ã¹ã¦ã®ãƒšãƒ¼ã‚¸ã‚’éè¡¨ç¤º
  document.querySelectorAll('.page-section').forEach(sec => sec.classList.remove('visible'));
  // æŒ‡å®šã®ãƒšãƒ¼ã‚¸ã ã‘è¡¨ç¤º
  document.getElementById(id).classList.add('visible');
  // ã‚¿ã‚¤ãƒˆãƒ«è¡¨ç¤ºåˆ‡æ›¿
  ["top", "metrics", "history", "introduce", "europe", "best11", "blog"].forEach(pid => {
    const elem = document.getElementById("page-title-" + pid);
    if (elem) elem.style.display = (id === pid) ? "flex" : "none";
  });
  // navãƒœã‚¿ãƒ³ã®activeåˆ¶å¾¡
  if (btn) {
    document.querySelectorAll("nav button").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    // ã‚¹ã‚³ã‚¢è¨ˆç®—æ–¹æ³•ãƒœã‚¿ãƒ³ã®è¡¨ç¤ºãƒ»éè¡¨ç¤º
// ã‚¹ã‚³ã‚¢è¨ˆç®—æ–¹æ³•ãƒœã‚¿ãƒ³ã®è¡¨ç¤ºãƒ»éè¡¨ç¤º
if (typeof window.updateScoreBtnDisplay === 'function') window.updateScoreBtnDisplay();

}
}

    // CSVèª­è¾¼ãƒ»ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º
    let clubData = [];
    let metricChart;
    document.addEventListener("DOMContentLoaded", () => {
      fetch("data/data.csv")
        .then(response => response.text())
        .then(text => {
          const lines = text.trim().split("\n");
          const headers = lines[0].split(",");
          const dataRows = lines.slice(1).map(line => line.split(","));
          clubData = dataRows.map(row => ({
            name: row[0],
            revenue: parseFloat(row[1]),
            revenueScore: parseFloat(row[6]),
            audience: parseInt(row[2]),
            audienceScore: parseFloat(row[7]),
            titles: parseInt(row[5]),
            titleScore: parseFloat(row[8]),
            avgRankScore: parseFloat(row[11]),
            sum: parseFloat(row[10]), 
            l: row[11],
            m: row[12],
            n: row[13],
            o: row[14],
            p: row[15]
          }));
          clubData.sort((a, b) => b.sum - a.sum);
          renderBig5(clubData);
          renderOthers(clubData);
          renderHistory(clubData);
          showMetricChart('revenue');
        });
    });
    function renderBig5(clubs) {
      const big5 = clubs.slice(0, 5);
      const big5Div = document.getElementById("big5-cards");
      big5Div.innerHTML = "";
      const row1 = document.createElement("div");
      row1.className = "big5-row";
      const row2 = document.createElement("div");
      row2.className = "big5-row";
      big5.forEach((club, i) => {
        let colorClass = "local";
        if (club.sum >= 30)      colorClass = "top-club";
        else if (club.sum >= 20) colorClass = "potential-big";
        else if (club.sum >= 5)  colorClass = "middle";
        const isLong = club.name.length >= 10;
        const card = document.createElement("div");
        card.className = `club-card ${colorClass} rank-${i+1}` + (isLong ? " long-title" : "");
        card.innerHTML =
          `<h3 class="club-title">${club.name}</h3><div class="score-val">ã‚¹ã‚³ã‚¢ï¼š${club.sum.toFixed(1)}</div>`;
        if (i < 3) row1.appendChild(card); else row2.appendChild(card);
      });
      big5Div.appendChild(row1); big5Div.appendChild(row2);
    }
    function renderOthers(clubs) {
      const others = clubs.slice(5);
      const tableDiv = document.getElementById("club-categories");
      tableDiv.innerHTML = "";
      const table = document.createElement("table");
      const thead = table.createTHead();
      const headerRow = thead.insertRow();
      ["é †ä½", "ã‚¯ãƒ©ãƒ–å", "åˆç®—ã‚¹ã‚³ã‚¢", "åŒºåˆ†"].forEach(h => {
        const th = document.createElement("th");
        th.textContent = h;
        headerRow.appendChild(th);
      });
      const tbody = table.createTBody();
      others.forEach((club, idx) => {
        let category, colorClass;
        if (club.sum >= 30) { category = "ãƒˆãƒƒãƒ—ã‚¯ãƒ©ãƒ–"; colorClass = "top-club"; }
        else if (club.sum >= 20) { category = "æ½œåœ¨çš„ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–"; colorClass = "potential-big"; }
        else if (club.sum >= 5)  { category = "ä¸­å …ã‚¯ãƒ©ãƒ–"; colorClass = "middle"; }
        else { category = "ãƒ­ãƒ¼ã‚«ãƒ«ã‚¯ãƒ©ãƒ–"; colorClass = "local"; }
        const tr = tbody.insertRow();
        tr.className = colorClass;
        [idx + 6, club.name, club.sum.toFixed(1), category].forEach(val => {
          const td = document.createElement("td");
          td.textContent = val;
          tr.appendChild(td);
        });
      });
      tableDiv.appendChild(table);
    }
    function renderHistory(clubs) {
      const historyDiv = document.getElementById("jleague-history");
      historyDiv.innerHTML = "";
      const hisTable = document.createElement("table");
      const hisThead = hisTable.createTHead();
      const hisHeader = hisThead.insertRow();
      ["ã‚¯ãƒ©ãƒ–å", "J1éå»10å¹´åœ¨ç±å¹´æ•°", "J1éå»10å¹´å¹³å‡é †ä½", "J1éå»10å¹´åœ¨ç±ã‚¹ã‚³ã‚¢"].forEach(h => {
        const th = document.createElement("th");
        th.textContent = h;
        hisHeader.appendChild(th);
      });
      const hisTbody = hisTable.createTBody();
      clubs.forEach(club => {
        const tr = hisTbody.insertRow();
        [
          club.name,
          club.l,
          club.m,
          (club.o === "#N/A" ? 21 : club.o)
        ].forEach(val => {
          const td = document.createElement("td");
          td.textContent = val;
          tr.appendChild(td);
        });
      });
      historyDiv.appendChild(hisTable);
    }
    function showMetricChart(key) {
      document.querySelectorAll('.metric-btn').forEach(btn => btn.classList.remove('active'));
      if (key === 'revenue') document.querySelector('.metric-btn:nth-child(1)').classList.add("active");
      if (key === 'audience') document.querySelector('.metric-btn:nth-child(2)').classList.add("active");
      if (key === 'titles')   document.querySelector('.metric-btn:nth-child(3)').classList.add("active");
      const chartData = clubData.map(club => club[key]);
      const labels = clubData.map(club => club.name);
      if (metricChart) metricChart.destroy();
      const ctx = document.getElementById("metricChart").getContext("2d");
      metricChart = new Chart(ctx, {
        type: "bar",
        data: {
          labels: labels,
          datasets: [{
            label: {
              revenue: "å£²ä¸Šé«˜ï¼ˆå„„å††ï¼‰",
              audience: "å¹³å‡è¦³å®¢å‹•å“¡ï¼ˆäººæ•°ï¼‰",
              titles: "ã‚¿ã‚¤ãƒˆãƒ«æ•°"
            }[key],
            data: chartData,
            backgroundColor: labels.map((_, i) => {
              let sum = clubData[i].sum;
              if (sum >= 30) return "#e94444bb";
              else if (sum >= 20) return "#22bbf0cc";
              else if (sum >= 5) return "#bbbbbbc8";
              else return "#232947bb";
            }),
            borderWidth: 1
          }]
        },
        options: {
          indexAxis: 'y',
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            x: { beginAtZero: true, ticks: { color: "#111" } },
            y: { ticks: { autoSkip: false, color: "#111" } }
          },
          plugins: {
            legend: { labels: { color: '#111' } },
            title: {
              display: false
            }
          }
        }
      });
    }
    // ==== ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘æ—¥æœ¬äººé¸æ‰‹ãƒšãƒ¼ã‚¸ç”¨ ====
    // europe.csvã®èª­ã¿è¾¼ã¿
    let europePlayers = [];
    fetch("data/europe.csv")
      .then(res => res.text())
      .then(text => {
        const lines = text.trim().split("\n");
        const headers = lines[0].split(",");
        europePlayers = lines.slice(1).map(line => {
          const vals = line.split(",");
          const obj = {};
          headers.forEach((h, i) => obj[h] = vals[i]);
          return obj;
        });
      });
    // åœ°å›³ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆ
    document.addEventListener("DOMContentLoaded", () => {
      const btns = document.querySelectorAll(".country-btn");
      btns.forEach(btn => {
        btn.addEventListener("mouseenter", () => btn.classList.add("active"));
        btn.addEventListener("mouseleave", () => btn.classList.remove("active"));
        btn.addEventListener("click", () => {
          btns.forEach(b => b.classList.remove("active"));
          btn.classList.add("active");
          showPlayerTable(btn.dataset.country);
        });
      });
    });
    // è¡¨è¡¨ç¤ºï¼ˆâ˜…ã“ã“ã ã‘å¤‰æ›´â˜…ï¼‰
    function showPlayerTable(country) {
      const div = document.getElementById("player-table-wrap");
      const rows = europePlayers.filter(row => (row.å›½ || row.Country) === country);
      if (!rows.length) {
        div.innerHTML = `<div style="color:#ffe;padding:16px;">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</div>`;
        return;
      }
      let html = `<h3 style="text-align:center;color:#ffd700;">${country}ã®æ—¥æœ¬äººé¸æ‰‹</h3>`;
      html += `
        <div style="display:flex; justify-content:center;">
          <table style="width:100%; max-width:1000px; min-width:320px; background:#fff; color:#fff; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,0.18); margin:auto;">
            <thead>
              <tr>
                ${Object.keys(rows[0]).map(h => `<th style="padding:10px; background:#299ad3; color:#fff;">${h}</th>`).join("")}
              </tr>
            </thead>
            <tbody>
              ${rows.map(row =>
                `<tr>${Object.values(row).map(val => `<td style="padding:9px; text-align:center; border-bottom:1px solid #e4e4e4;">${val}</td>`).join("")}</tr>`
              ).join("")}
            </tbody>
          </table>
        </div>
      `;
      div.innerHTML = html;
    }
// --- ãƒ™ã‚¹ãƒˆ11ãƒšãƒ¼ã‚¸ ãƒ­ã‚¸ãƒƒã‚¯ ---
window.nowSelectedPosKey = null;

let best11Formation = "343"; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ:3-4-3
let best11Selected = {};     // ãƒã‚¸ã‚·ãƒ§ãƒ³ã”ã¨ã®é¸æ‰‹å
let best11Positions = {
  "343": [
    {key:"GK", label:"GK"},
    {key:"CB1", label:"CB1"}, {key:"CB2", label:"CB2"}, {key:"CB3", label:"CB3"},
    {key:"MF1", label:"MF1"}, {key:"MF2", label:"MF2"},
    {key:"MF3", label:"MF3"}, {key:"MF4", label:"MF4"},
    {key:"MF5", label:"MF5"}, {key:"MF6", label:"MF6"}, {key:"FW", label:"FW"}
  ],
  "433": [
    {key:"GK", label:"GK"},
    {key:"CB1", label:"CB1"}, {key:"CB2", label:"CB2"}, {key:"CB3", label:"CB3"}, {key:"CB4", label:"CB4"},
    {key:"MF1", label:"MF1"}, {key:"MF2", label:"MF2"}, {key:"MF3", label:"CM3"},
    {key:"MF4", label:"MF4"}, {key:"MF5", label:"MF5"}, {key:"FW", label:"FW"}
  ]
};

// europePlayersã¯æ—¢å­˜fetchã§èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹å‰æ
function setFormation(form, btn) {
  best11Formation = form;
  document.querySelectorAll('.formation-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  best11Selected = {};
  renderPositionTabs();
  renderBest11Table();
}
function renderPositionTabs() {
  const posDiv = document.getElementById("position-tabs");
  if (!posDiv) return;
  const positions = best11Positions[best11Formation];
  let html = '<div style="margin-bottom:7px;font-weight:bold;">ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚’é¸ã‚“ã§ãã ã•ã„</div>';
html += '<div class="position-btn-row">';
positions.forEach((pos, i) => {
  html += `<button class="position-btn${i===0?' active':''}" data-pos="${pos.key}" onclick="selectPosition('${pos.key}', this)">
    ${pos.label}
  </button>`;
});
html += '</div>';

  // é¸æ‰‹ãƒªã‚¹ãƒˆéƒ¨
  html += '<div id="player-choice-list"></div>';
  posDiv.innerHTML = html;
  // åˆæœŸé¸æŠ
  setTimeout(()=>{
    selectPosition(positions[0].key, posDiv.querySelector('.position-btn'));
  },10);
}


function selectPosition(posKey, btn) {
window.nowSelectedPosKey = posKey;
  document.querySelectorAll('#position-tabs .position-btn').forEach(b=>b.classList.remove('active'));
  if(btn) btn.classList.add('active');
  let listDiv = document.getElementById('player-choice-list');
  if (!listDiv) return;

  // ãƒã‚¸ã‚·ãƒ§ãƒ³åï¼ˆä¾‹: "CB1"â†’"CB"ã€"CB"â†’"DF"ã‚‚è¨±å®¹ï¼‰
  const searchKey = posKey.replace(/[0-9]/g, '').toUpperCase();

  // ã¾ãšå®Œå…¨ä¸€è‡´
  let players = europePlayers.filter(p => {
    let pos = (p['ãƒã‚¸ã‚·ãƒ§ãƒ³']||p['Position']||"").toUpperCase();
    return pos === searchKey;
  });

  // ãã‚Œã§ã‚‚è¦‹ã¤ã‹ã‚‰ãªã‘ã‚Œã°ã€DF/GK/MF/FWã®åºƒç¾©ã§å†æ¤œç´¢
  if(players.length === 0) {
    players = europePlayers.filter(p => {
      let pos = (p['ãƒã‚¸ã‚·ãƒ§ãƒ³']||p['Position']||"").toUpperCase();
      // ä¾‹: CB,SB,LB,RBã¯ã™ã¹ã¦DFæ‰±ã„
      if(searchKey === 'CB' || searchKey === 'SB' || searchKey === 'LB' || searchKey === 'RB') {
        return pos === 'DF';
      }
      if(searchKey === 'CM' || searchKey === 'DM' || searchKey === 'OM' || searchKey === 'LM' || searchKey === 'RM') {
        return pos === 'MF';
      }
      if(searchKey === 'FW' || searchKey === 'ST' || searchKey === 'CF' || searchKey === 'RW' || searchKey === 'LW') {
        return pos === 'FW';
      }
      return pos === searchKey;
    });
  }

  // ãã‚Œã§ã‚‚ãªã‘ã‚Œã°å…¨ä½“ã‹ã‚‰ä¸€éƒ¨ä¸€è‡´
  if(players.length === 0) {
    players = europePlayers.filter(p => {
      let pos = (p['ãƒã‚¸ã‚·ãƒ§ãƒ³']||p['Position']||"").toUpperCase();
      return pos.includes(searchKey);
    });
  }

  // è¡¨ç¤º
  if(players.length === 0) {
    listDiv.innerHTML = `<div style="color:#ffd700;padding:7px;">é¸æ‰‹ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</div>`;
    return;
  }
listDiv.innerHTML =
  '<div class="player-choice-row">' +
  players.map(p =>
  `<button style="margin:0 6px 6px 0;
      padding:6px 16px;
      border-radius:12px;
      border:1.4px solid #299ad3;
      background:#fff;
      color:#232947;
      font-weight:bold;
      font-size:1.09em;
      cursor:pointer;"
    onclick="choosePlayer('${posKey}','${p['åå‰']||p['Name']}')">
    ${p['åå‰']||p['Name']}
   </button>`
)
.join('') +
  '</div>';

renderCourtPlayers();
}

// è¡¨æç”»
function renderBest11Table() {
  const tableDiv = document.getElementById("best11-table");
  const positions = best11Positions[best11Formation];
  // ä¸¦ã³é †ã‚’FWâ†’MF(æ•°å­—å¤§ãã„é †)â†’CB(æ•°å­—å¤§ãã„é †)â†’GK
  const posOrder = positions.slice().sort((a, b) => {
    // 1. FWï¼ˆè¤‡æ•°ã‚ã‚‹å ´åˆã¯ç•ªå·é †ã«ä¸Šï¼‰
    if (a.key.startsWith('FW') && !b.key.startsWith('FW')) return -1;
    if (!a.key.startsWith('FW') && b.key.startsWith('FW')) return 1;
    if (a.key.startsWith('FW') && b.key.startsWith('FW')) {
      const an = parseInt(a.key.replace('FW','')) || 0;
      const bn = parseInt(b.key.replace('FW','')) || 0;
      return an - bn;
    }
    // 2. MFï¼ˆæ•°å­—å¤§ãã„é †ï¼‰
    if (a.key.startsWith('MF') && !b.key.startsWith('MF')) return -1;
    if (!a.key.startsWith('MF') && b.key.startsWith('MF')) return 1;
    if (a.key.startsWith('MF') && b.key.startsWith('MF')) {
      const an = parseInt(a.key.replace('MF','')) || 0;
      const bn = parseInt(b.key.replace('MF','')) || 0;
      return bn - an;
    }
    // 3. CBï¼ˆæ•°å­—å¤§ãã„é †ï¼‰
    if (a.key.startsWith('CB') && !b.key.startsWith('CB')) return -1;
    if (!a.key.startsWith('CB') && b.key.startsWith('CB')) return 1;
    if (a.key.startsWith('CB') && b.key.startsWith('CB')) {
      const an = parseInt(a.key.replace('CB','')) || 0;
      const bn = parseInt(b.key.replace('CB','')) || 0;
      return bn - an;
    }
    // 4. GKã¯ä¸€ç•ªä¸‹
    if (a.key === 'GK') return 1;
    if (b.key === 'GK') return -1;
    // ãã®ä»–ã¯å…ƒã®é †ç•ª
    return 0;
  });

  let html = `
  <table>
    <thead>
      <tr>
        <th>ãƒã‚¸ã‚·ãƒ§ãƒ³</th>
        <th>é¸æ‰‹</th>
        <th>ã‚¯ãƒ©ãƒ–</th>
        <th>ãƒªãƒ¼ã‚°</th>
      </tr>
    </thead>
    <tbody>
  `;

  posOrder.forEach(pos => {
    let name = best11Selected[pos.key] || '';
    let club = '', league = '';
    if (name) {
      // ã€Œåå‰ã€ã¾ãŸã¯ã€ŒNameã€åˆ—ã§è©²å½“é¸æ‰‹ã‚’æ¤œç´¢
      const player = europePlayers.find(p =>
        (p['åå‰'] || p['Name']) === name
      );
      if (player) {
        club = player['ãƒãƒ¼ãƒ å'] || player['Club'] || '';
        league = player['ãƒªãƒ¼ã‚°'] || player['League'] || '';
      }
    }
    html += `<tr>
      <td style="font-weight:bold;">${pos.label}</td>
      <td${name ? '' : ' class="unselected"'}>${name || 'æœªé¸æŠ'}</td>
      <td>${club || '-'}</td>
      <td>${league || '-'}</td>
    </tr>`;
  });

  html += "</tbody></table>";
  tableDiv.innerHTML = html;
}


// ãƒ™ã‚¹ãƒˆ11ãƒšãƒ¼ã‚¸åˆæœŸåŒ–ãƒ•ãƒƒã‚¯
document.addEventListener("DOMContentLoaded", ()=>{
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œãƒ™ã‚¹ãƒˆ11ãƒšãƒ¼ã‚¸ã€ã‚’é–‹ã„ãŸæ™‚ã ã‘æç”»
  document.getElementById("nav-europe-btn").addEventListener("click", ()=>{
    setTimeout(()=>{ renderPositionTabs(); renderBest11Table(); }, 80);
  });
  // ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚¯ãƒªãƒƒã‚¯ã«ã‚‚hook
  let bestBtn = document.querySelector('.nav-dropdown-content button');
  if(bestBtn){
    bestBtn.addEventListener("click", ()=>{
      setTimeout(()=>{ renderPositionTabs(); renderBest11Table(); }, 80);
    });
  }
});
// --- courtç”»åƒä¸Šã«é¸æ‰‹åã‚’é…ç½®ã™ã‚‹ãŸã‚ã®åº§æ¨™ ---
const best11PosCoords = {
  "343": {
    GK:   {top: 290, left: 140},
    CB1:  {top: 225, left: 50},
    CB2:  {top: 235, left: 140},
    CB3:  {top: 225, left: 230},
    MF1:  {top: 120, left: 40},
    MF2:  {top: 120, left: 240},
    MF3:  {top: 165, left: 90},
    MF4:  {top: 165, left: 190},
    MF5:  {top: 60,  left: 70},
    FW:  {top: 25,  left: 140},
    MF6:  {top: 60,  left: 210}
  },
  "433": {
    GK:   {top: 290, left: 140},
    CB1:   {top: 200, left: 38},
    CB2:  {top: 235, left: 100},
    CB3:  {top: 235, left: 190},
    CB4:   {top: 200, left: 240},
    MF1:  {top: 130, left: 55},
    MF2:  {top: 155, left: 140},
    MF3:  {top: 130, left: 225},
    MF4:  {top: 70,  left: 70},
    FW:  {top: 25,  left: 140},
    MF5:  {top: 70,  left: 210}
  }
};
const best11DisplayLabel = {
  GK: 'GK',
  CB1: 'DF', CB2: 'DF', CB3: 'DF',
  C4: 'DF',
  MF1: 'MF', MF2: 'MF',
  MF3: 'MF', MF4: 'MF', MF5: 'MF',
  FW: 'FW',
};

// ç”»åƒä¸Šã«é¸æ‰‹åã‚’é…ç½®ï¼ˆæ–‡å­—æ•°ã§è‡ªå‹•ç¸®å°Bæ¡ˆï¼‰
function renderCourtPlayers() {
  const area = document.getElementById('court-area');
  if (!area) return;
  area.querySelectorAll('.best11-player-label').forEach(e => e.remove());
  const positions = best11Positions[best11Formation];
  positions.forEach(pos => {
    const c = best11PosCoords[best11Formation][pos.key];
    if (!c) return;
    const label = document.createElement('div');
    label.className =
  'best11-player-label'
  + (best11Selected[pos.key] ? '' : ' unselected')
  + (pos.key === window.nowSelectedPosKey ? ' selected' : '');
    label.style.top = `${c.top}px`;
    label.style.left = `${c.left}px`;

    let name = best11Selected[pos.key] ? best11Selected[pos.key] : pos.label;
    let fontSize = '1em';
    if (name.length >= 7) fontSize = '0.80em';
    else if (name.length >= 6) fontSize = '0.89em';
    // 5æ–‡å­—ä»¥ä¸‹ã¯æ¨™æº–

    label.innerHTML = `<span style="font-size:${fontSize};">${name}</span>`;
    label.onclick = function() {
      selectPosition(pos.key, null); // ç¬¬äºŒå¼•æ•°ã¯æœªä½¿ç”¨ãªã®ã§nullã§OK
    };
    label.style.cursor = "pointer";
    area.appendChild(label);
  });
}




// æ—¢å­˜ã®ã€Œé¸æ‰‹é¸æŠæ™‚ã€ã€Œãƒ•ã‚©ãƒ¼ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ‡æ›¿æ™‚ã€ãªã©ã§
// å¿…ãš renderCourtPlayers() ã‚’å‘¼ã¶ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚

// ä¾‹ãˆã°...
function setFormation(form, btn) {
  best11Formation = form;

  const formationTitle = document.getElementById('formation-title');
  if (formationTitle) {
    let text = '';
    if (form === '343') text = '3-4-3';
    else if (form === '433') text = '4-3-3';
    else text = form;
    formationTitle.textContent = `ãƒ•ã‚©ãƒ¼ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼š${text}`;
  }

  document.querySelectorAll('.formation-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  best11Selected = {};
  renderPositionTabs();
  renderBest11Table();
  renderCourtPlayers(); // â† ã“ã“è¿½åŠ ï¼
}
  // â–¼ã“ã‚Œã‚’è¿½åŠ 
  const formationLabels = { "343": "3-4-3", "433": "4-3-3" };
  const formationTitle = document.getElementById("formation-title");
  if (formationTitle) {
    formationTitle.textContent = "ãƒ•ã‚©ãƒ¼ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼š" + (formationLabels[form] || form);
  }


function choosePlayer(posKey, name) {
  best11Selected[posKey]=name;
  renderBest11Table();
  renderCourtPlayers(); // â† ã“ã“è¿½åŠ ï¼
}

// ãƒšãƒ¼ã‚¸é–‹ã„ãŸæ™‚ã‚‚
document.addEventListener("DOMContentLoaded", ()=>{
  let bestBtn = document.querySelector('.nav-dropdown-content button');
  if(bestBtn){
    bestBtn.addEventListener("click", ()=>{
      setTimeout(()=>{ renderPositionTabs(); renderBest11Table(); renderCourtPlayers(); }, 80);
    });
  }
});


  </script>
<!-- ...ã‚ãªãŸã®ä»–ã®JS... -->

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script>
  // ğŸ‘‡ã“ã‚Œã‚’è¿½è¨˜ï¼ˆã¾ãŸã¯æ—¢å­˜ã®DOMContentLoadedå†…ã«è¿½åŠ ï¼‰
document.addEventListener("DOMContentLoaded", function() {
  var btn = document.getElementById("copy-best11-img-btn");
  if(btn){
    btn.onclick = function() {
      const captureElem = document.getElementById('best11-capture-area');
      // â˜…ã€Œé’è‰²ãƒ©ãƒ™ãƒ«ï¼ˆ.selectedï¼‰ã€ã‚’ä¸€æ™‚çš„ã«å¤–ã™
      const selectedLabels = captureElem.querySelectorAll('.best11-player-label.selected');
      selectedLabels.forEach(e => e.classList.remove('selected'));

      btn.style.visibility = 'hidden'; // ãƒœã‚¿ãƒ³éš ã™

      html2canvas(captureElem, {
        backgroundColor: null // å¿…è¦ãªã‚‰"#fff"
      }).then(canvas => {
        btn.style.visibility = 'visible';

        // ã‚­ãƒ£ãƒ—ãƒãƒ£å¾Œã«ã€Œselectedã€ã‚¯ãƒ©ã‚¹ã‚’å…ƒã«æˆ»ã™
        selectedLabels.forEach(e => e.classList.add('selected'));

        canvas.toBlob(blob => {
          if (navigator.clipboard && navigator.clipboard.write) {
            const item = new ClipboardItem({ "image/png": blob });
            navigator.clipboard.write([item]).then(function() {
              document.getElementById('copy-best11-img-msg').textContent = 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼';
            }).catch(function(e){
              document.getElementById('copy-best11-img-msg').textContent = 'ã‚³ãƒ”ãƒ¼å¤±æ•—ï¼ˆæ¨©é™/HTTPSï¼Ÿï¼‰';
            });
          } else {
            document.getElementById('copy-best11-img-msg').textContent = 'å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ï¼ˆChromeæ¨å¥¨ï¼‰';
          }
        });
      });
    }
  }
});

// ã‚¯ãƒ©ãƒ–ãƒªãƒ¼ã‚°ç´¹ä»‹ã‚¿ãƒ–
let clubLeagueList = [];
let clubLeagueHeaders = [];
fetch("data/data.csv")
  .then(res => res.text())
  .then(text => {
    const lines = text.trim().split("\n");
    clubLeagueHeaders = lines[0].split(",");
    clubLeagueList = lines.slice(1).map(line => {
      const vals = line.split(",");
      const obj = {};
      clubLeagueHeaders.forEach((h, i) => obj[h] = vals[i]);
      return obj;
    });
    renderClubLeagueTable("J1"); // åˆæœŸè¡¨ç¤º
  });

function renderClubLeagueTable(league) {
  const tableDiv = document.getElementById("club-league-table");
  // æ‰€å±ãƒªãƒ¼ã‚°ã®åˆ—åã‚’ç¢ºèªï¼ˆä¾‹ï¼š"æ‰€å±ãƒªãƒ¼ã‚°"ã‚„"ãƒªãƒ¼ã‚°"ãªã©ï¼‰
  let leagueCol = clubLeagueHeaders.find(h => h.includes("æ‰€å±ãƒªãƒ¼ã‚°"));
  if (!leagueCol) { tableDiv.innerHTML = "CSVã«æ‰€å±ãƒªãƒ¼ã‚°åˆ—ãŒã‚ã‚Šã¾ã›ã‚“"; return; }
  let nameCol = clubLeagueHeaders[0]; // æœ€åˆã®åˆ—ãŒã‚¯ãƒ©ãƒ–åå‰æ
  // ãƒ•ã‚£ãƒ«ã‚¿
  const rows = clubLeagueList.filter(club => club[leagueCol] === league);
  if (!rows.length) {
    tableDiv.innerHTML = `<div style="padding:16px;">ã“ã®ãƒªãƒ¼ã‚°ã®ã‚¯ãƒ©ãƒ–ãƒ‡ãƒ¼ã‚¿ã¯ã‚ã‚Šã¾ã›ã‚“</div>`;
    return;
  }
  let html = `
  <table>
    <thead><tr><th>ã‚¯ãƒ©ãƒ–å</th></tr></thead>
    <tbody>
      ${rows.map(club => 
        `<tr>
           <td style="cursor:pointer; color:#3cf;" onclick="showClubStatus('${club[nameCol]}')">${club[nameCol]}</td>
         </tr>`
      ).join("")}
    </tbody>
  </table>
`;

  tableDiv.innerHTML = html;
}

// ã‚¿ãƒ–ã‚¤ãƒ™ãƒ³ãƒˆ
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll(".league-tab-btn").forEach(btn => {
    btn.addEventListener("click", function() {
      document.querySelectorAll(".league-tab-btn").forEach(b => b.classList.remove("active"));
      this.classList.add("active");
      renderClubLeagueTable(this.dataset.league);
    });
  });
});
function showClubStatus(clubName) {
  // clubDataï¼ˆå…¨ã‚¯ãƒ©ãƒ–ãƒ‡ãƒ¼ã‚¿é…åˆ—ï¼‰ã‹ã‚‰è©²å½“ã‚¯ãƒ©ãƒ–ã‚’æ¢ã™
  const club = clubData.find(c => c.name === clubName || c["ã‚¯ãƒ©ãƒ–å"] === clubName);
  if (!club) return;

  // å…¨ã‚¯ãƒ©ãƒ–ã®ã‚¹ã‚³ã‚¢é †ã§é †ä½ã‚’å‡ºã™
  const sorted = [...clubData].sort((a, b) => b.sum - a.sum);
  const rank = sorted.findIndex(c => c.name === clubName || c["ã‚¯ãƒ©ãƒ–å"] === clubName) + 1;

  // HTMLç”Ÿæˆï¼ˆãƒ‡ã‚¶ã‚¤ãƒ³ä¾‹ï¼šè‡ªç”±ã«èª¿æ•´å¯ï¼‰
  const html = `
      <div style="font-size:1.36em; font-weight:bold; color:#97d7ff; margin-bottom:8px; letter-spacing:0.06em;">
        ${clubName}
      </div>
      <div style="display:flex; flex-wrap:wrap; gap:13px 38px; font-size:1.13em;">
        <div>ğŸ… <b>æ‰€å±ãƒªãƒ¼ã‚°:</b> ${club.p || club["æ‰€å±ãƒªãƒ¼ã‚°"] || '-'}</div>
        <div>ğŸ‘‘ <b>ãƒ“ãƒƒã‚°ã‚¯ãƒ©ãƒ–ã‚¹ã‚³ã‚¢:</b> ${club.sum ? club.sum.toFixed(1) : '-'} <span style="font-size:0.97em;">ï¼ˆ${rank}ä½ï¼‰</span></div>
        <div>ğŸ’° <b>å£²ä¸Šé«˜:</b> ${club.revenue || club["å£²ä¸Šé«˜ï¼ˆå„„å††ï¼‰"] || '-'} å„„å††</div>
        <div>ğŸ‘¥ <b>å¹³å‡è¦³å®¢æ•°:</b> ${(club.audience || club["å¹³å‡è¦³å®¢å‹•å“¡æ•°"] || '-').toLocaleString()} äºº</div>
        <div>ğŸ† <b>ã‚¿ã‚¤ãƒˆãƒ«ç²å¾—æ•°:</b> ${club.titles || club["ã‚¿ã‚¤ãƒˆãƒ«è¨ˆ"] || '-'}</div>
        <div>ğŸ“Š <b>J1åœ¨ç±10å¹´å¹³å‡é †ä½:</b> ${club["J1åœ¨ç±10å¹´å¹³å‡é †ä½"] || club.m || '-' } ä½</div>
      </div>
      <button onclick="document.getElementById('club-status-board').style.display='none';"
        style="position:absolute;top:13px;right:14px; background:#29b6e6; border:none; border-radius:7px; color:#fff; padding:5px 13px; font-size:1.01em; cursor:pointer;">é–‰ã˜ã‚‹</button>
  `;
  const board = document.getElementById("club-status-board");
  board.innerHTML = html;
  board.style.display = "block";
}
// ã‚¹ã‚³ã‚¢è¨ˆç®—æ–¹æ³•ãƒœã‚¿ãƒ³ã®åˆ¶å¾¡ï¼ˆ1ã‹æ‰€ã ã‘ã§OKï¼ï¼‰
document.addEventListener("DOMContentLoaded", function() {
  const scoreBtn = document.getElementById("score-method-btn");
  const scorePop = document.getElementById("score-method-pop");

  // ãƒšãƒ¼ã‚¸åˆ‡æ›¿æ™‚ã«è¡¨ç¤º/éè¡¨ç¤ºåˆ¶å¾¡ï¼ˆshowPageã®ä¸­ã«ã‚‚åŒã˜ãƒ­ã‚¸ãƒƒã‚¯å¿…è¦ï¼‰
  function updateScoreBtnDisplay() {
    const id = document.querySelector('.page-section.visible')?.id;
    if (scoreBtn) scoreBtn.style.display = (id === "top") ? "block" : "none";
    if (scorePop) scorePop.style.display = "none";
  }
  updateScoreBtnDisplay();

  // ãƒšãƒ¼ã‚¸åˆ‡æ›¿æ™‚ã‚‚å‘¼ã³å‡ºã™ãŸã‚ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«å…¬é–‹
  window.updateScoreBtnDisplay = updateScoreBtnDisplay;

  // ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—è¡¨ç¤º
  if(scoreBtn && scorePop){
    scoreBtn.onclick = function(e){
      e.stopPropagation();
      scorePop.style.display = (scorePop.style.display==="none"||!scorePop.style.display) ? "block" : "none";
    };
    // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ä»¥å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
    document.addEventListener("click", function(e){
      if(scorePop.style.display==="block" && !scorePop.contains(e.target) && e.target !== scoreBtn){
        scorePop.style.display="none";
      }
    });
  }
});
document.addEventListener("DOMContentLoaded", function() {
  // è©³ç´°ãƒªãƒ³ã‚¯ã‚¯ãƒªãƒƒã‚¯ã§ä¸­å¤®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—è¡¨ç¤º
  const detailLink = document.getElementById("score-detail-link");
  const detailPop = document.getElementById("score-detail-pop");
  if(detailLink && detailPop){
    detailLink.onclick = function(e){
      e.preventDefault();
      detailPop.style.display = "block";
    };
    // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹ï¼ˆÃ—ãƒœã‚¿ãƒ³ã®ã¿ãŒè‰¯ã‘ã‚Œã°â†“ã¯æ¶ˆã—ã¦ã‚‚OKï¼‰
    document.addEventListener("click", function(e){
      if(detailPop.style.display==="block" && !detailPop.contains(e.target) && e.target !== detailLink){
        detailPop.style.display="none";
      }
    });
  }
});
// å„ã‚¯ãƒ©ãƒ–ç´¹ä»‹ãƒœãƒ¼ãƒ‰ã‚’å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
document.addEventListener("click", function(e){
  const board = document.getElementById("club-status-board");
  // è¡¨ç¤ºä¸­ ã‹ã¤ ã‚¯ãƒªãƒƒã‚¯å…ˆãŒãƒœãƒ¼ãƒ‰å†…ã‚„ã€Œã‚¯ãƒ©ãƒ–åã‚»ãƒ«ã€ã§ãªã‘ã‚Œã°é–‰ã˜ã‚‹
  if (board.style.display === "block" && !board.contains(e.target)) {
    // ã€Œã‚¯ãƒ©ãƒ–åã‚»ãƒ«ã€ã®ã‚¯ãƒªãƒƒã‚¯ã§å³æ¶ˆãˆé˜²æ­¢
    if (e.target.matches("td[onclick^='showClubStatus']")) return;
    board.style.display = "none";
  }
});


</script>

</body>
</html>
